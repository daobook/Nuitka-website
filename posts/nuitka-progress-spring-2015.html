<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nuitka Progress in Spring 2015</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" type="text/css" />
    <link rel="canonical" href="https://nuitka.net/posts/nuitka-progress-spring-2015.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />   
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Nuitka Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Nuitka the Python Compiler
            <img src="../_static/Nuitka-Logo-Symbol.svg" class="logo" alt="Logo"/>
          </a><!-- Empty override file take the place of searchbox.html, which generates search box. -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/user-manual.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Commercial Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/commercial.html">Nuitka Commercial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html">Nuitka Release 0.6.20 (Draft)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-19">Nuitka Release 0.6.19</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-18">Nuitka Release 0.6.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#older-releases">Older Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/roadmap.html">Roadmap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/developer-manual.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/api-doc.html">API doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/factory.html">Factory Instructions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Media</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/Presentations.html">Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/Streaming.html">Streaming</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/impressum.html">Impressum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Under construction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/pyside2.html">Nuitka PySide2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/donations.html">Donations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/gsoc2019.html">Google Summer of Code 2019</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nuitka the Python Compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <section id="nuitka-progress-in-spring-2015">
<h1><a class="toc-backref" href="#id1">Nuitka Progress in Spring 2015</a><a class="headerlink" href="#nuitka-progress-in-spring-2015" title="Permalink to this headline"></a></h1>
<p>It’s absolutely time to speak about what’s going on with Nuitka, there
have been a few releases, and big things are going to happen now. The
ones I have always talked of, it’s happening now.</p>
<p>I absolutely prefer to talk of things when they are completed, that is
why I am shy to make these kinds of postings, but this time, I think
it’s warranted. The next couple of releases are going to be very
different.</p>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#nuitka-progress-in-spring-2015" id="id1">Nuitka Progress in Spring 2015</a></p>
<ul>
<li><p><a class="reference internal" href="#ssa-single-state-assignment-form" id="id2">SSA (Single State Assignment Form)</a></p></li>
<li><p><a class="reference internal" href="#scalability" id="id3">Scalability</a></p></li>
<li><p><a class="reference internal" href="#compatibility" id="id4">Compatibility</a></p>
<ul>
<li><p><a class="reference internal" href="#python-3-5" id="id5">Python 3.5</a></p></li>
<li><p><a class="reference internal" href="#cells-for-closure" id="id6">Cells for Closure</a></p></li>
<li><p><a class="reference internal" href="#importing-enhancements" id="id7">Importing Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#performance" id="id8">Performance</a></p>
<ul>
<li><p><a class="reference internal" href="#graphs-and-benchmarks" id="id9">Graphs and Benchmarks</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#standalone" id="id10">Standalone</a></p></li>
<li><p><a class="reference internal" href="#other-stuff" id="id11">Other Stuff</a></p>
<ul>
<li><p><a class="reference internal" href="#debian-stable" id="id12">Debian Stable</a></p></li>
<li><p><a class="reference internal" href="#funding" id="id13">Funding</a></p></li>
<li><p><a class="reference internal" href="#europython-2015" id="id14">EuroPython 2015</a></p></li>
<li><p><a class="reference internal" href="#collaborators" id="id15">Collaborators</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#future" id="id16">Future</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="ssa-single-state-assignment-form">
<h2><a class="toc-backref" href="#id2">SSA (Single State Assignment Form)</a><a class="headerlink" href="#ssa-single-state-assignment-form" title="Permalink to this headline"></a></h2>
<p>For a long, long time already, each release of Nuitka has worked towards
increasing <a class="reference external" href="http://en.wikipedia.org/wiki/Static_single_assignment_form">“SSA”</a> usage in
Nuitka.</p>
<p>The component that works on this, is now called “trace collection”, and
does the major driving part for optimization. It collects “variable
traces” and puts them together into “global” forms as well.</p>
<p>Based on these traces, optimizations can be made. Having SSA or not, is
(to me) the difference between Nuitka as a mere compiler, and Nuitka as
an optimizing compiler.</p>
<p>The major news is that factory versions of Nuitka now do this in serious
ways, propagating values forward, and we also are close to eliminating
dead assignments, some of which become dead by being having been forward
propagated.</p>
<p>So we can now finally see that big step, jump really, happening, and
Nuitka does now do some pretty good static optimization, at least
locally.</p>
<p>Still, right now, this trivial code assigns to a local variable, then
reads from it to return. But not for much longer.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">a</span>
</pre></div>
</div>
<p>This is going to instantly give performance gains, and more importantly,
will enable analysis, that leads to avoiding e.g. the creation of
function objects for local functions, becoming able to in-line, etc.</p>
<p>This is major excitement to me. And I cannot wait to have the releases
that do this.</p>
</section>
<section id="scalability">
<h2><a class="toc-backref" href="#id3">Scalability</a><a class="headerlink" href="#scalability" title="Permalink to this headline"></a></h2>
<p>The focus has also been lately, to reduce Nuitka’s own memory usage. It
has gone down by a large factor, often by avoiding cyclic dependencies
in the data structures, that the garbage collector of Python failed to
deal with properly.</p>
<p>The scalability of Nuitka also depends much on generated code size. With
the optimization become more clever, less code needs to be generated,
and that will help a lot. On some platforms, MSVC most notably, it can
be really slow, but it’s noteworthy that Nuitka works not just with 2008
edition, but with the latest MSVC, which appears to be better.</p>
</section>
<section id="compatibility">
<h2><a class="toc-backref" href="#id4">Compatibility</a><a class="headerlink" href="#compatibility" title="Permalink to this headline"></a></h2>
<p>There was not a whole lot to gain in the compatibility domain anymore.
Nothing important certainly. But there are import changes.</p>
<section id="python-3-5">
<h3><a class="toc-backref" href="#id5">Python 3.5</a><a class="headerlink" href="#python-3-5" title="Permalink to this headline"></a></h3>
<p>The next release has changes to compile and run the Python3.4 test suite
successfully. Passing here means, to pass/fail in the same way as does
the uncompiled Python. Failures are of course expected, and a nice way
of having coverage for exception codes.</p>
<p>The new <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> operator is not supported yet. I will wait with that for
things to stabilize. It’s currently only an alpha release.</p>
<p>However, Nuitka has probably never been this close to supporting a new
Python version at release time. And since 3.4 was such a heavy drain,
and still not perfectly handled (<code class="docutils literal notranslate"><span class="pre">super</span></code> still works like it’s 3.3
e.g.), I wanted to know what is coming a bit sooner.</p>
</section>
<section id="cells-for-closure">
<h3><a class="toc-backref" href="#id6">Cells for Closure</a><a class="headerlink" href="#cells-for-closure" title="Permalink to this headline"></a></h3>
<p>We now provide a <code class="docutils literal notranslate"><span class="pre">__closure__</span></code> value for compiled functions too. These
are not writable in Python, so it’s only a view. Having moved storage
into the compiled function object, that was easy.</p>
</section>
<section id="importing-enhancements">
<h3><a class="toc-backref" href="#id7">Importing Enhancements</a><a class="headerlink" href="#importing-enhancements" title="Permalink to this headline"></a></h3>
<p>The the past couple of releases, the import logic was basically
re-written with compatibility much increased. The handling of file case
during import, multiple occurrences in the path, and absolute import
future flags for relative imports has been added.</p>
<p>It’s mainly the standalone community that will have issues, when just
one of these imports doesn’t find the correct thing, but picking the
wrong one will of course have seriously bad impacts on compile time
analysis too. So once we do cross module optimization, this must be rock
solid.</p>
<p>I think we have gotten there, tackling these finer details now too.</p>
</section>
</section>
<section id="performance">
<h2><a class="toc-backref" href="#id8">Performance</a><a class="headerlink" href="#performance" title="Permalink to this headline"></a></h2>
<section id="graphs-and-benchmarks">
<h3><a class="toc-backref" href="#id9">Graphs and Benchmarks</a><a class="headerlink" href="#graphs-and-benchmarks" title="Permalink to this headline"></a></h3>
<p>Nuitka, users don’t know what to expect regarding the speed of their
code after compilation through Nuitka, neither now nor after type
inference (possibly hard to guess). Nuitka does a bunch of optimizations
for some constructs pretty heavily, but weak at others. But how much
does that affect real code?</p>
<p>There may well be no significant gain at all for many people, while
there is a number for PyStone that suggests higher. The current and
future versions possibly do speed up but the point is that you cannot
tell if it is even worth for someone to try.</p>
<p>Nuitka really has to catch up here. The work on automated performance
graphs has some made progress, and they are supposed to show up on
<a class="reference external" href="https://speedcenter.nuitka.net">Nuitka Speedcenter</a> each time,
<code class="docutils literal notranslate"><span class="pre">master</span></code>, <code class="docutils literal notranslate"><span class="pre">develop</span></code> or <code class="docutils literal notranslate"><span class="pre">factory</span></code> git branches change.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There currently is no structure to these graphs. There is no
explanations or comments, and there is no trend indicators. All of
which makes it basically useless to everybody except me. And even
harder for me than necessary.</p>
</div>
<p>However, as a glimpse of what will happen when we in-line functions,
take a look at the case, where we already eliminate parameter parsing
only, and make tremendous speedups:</p>
<p><a class="reference external" href="https://speedcenter.nuitka.net/constructs/construct-calllambdaexpressiondirectly.html">Lambda call construct case</a></p>
<p>Right now (the graph gets automatic updates with each change), what you
should see, is that <code class="docutils literal notranslate"><span class="pre">develop</span></code> branch is 20 times faster than CPython
for that very specific bit of code. That is where we want to be, except
that with actually in-line, this will of course be even better.</p>
<p>It’s artificial, but once we can forward propagate local function
creations, it will apply there too. The puzzle completes.</p>
<p>But we also need to put real programs and use cases to test. This may
need your help. Let me know if you want to.</p>
</section>
</section>
<section id="standalone">
<h2><a class="toc-backref" href="#id10">Standalone</a><a class="headerlink" href="#standalone" title="Permalink to this headline"></a></h2>
<p>The standalone mode of Nuitka is pretty good, and as usual it continued
to improve only.</p>
<p>Nothing all that important going on there, except the work on a plug-in
framework, which is under development, and being used to handle e.g.
PyQt plug-ins, or known issues with certain packages.</p>
<p>The importing improvements already mentioned, have now allowed to cover
many more libraries successfully than before.</p>
</section>
<section id="other-stuff">
<h2><a class="toc-backref" href="#id11">Other Stuff</a><a class="headerlink" href="#other-stuff" title="Permalink to this headline"></a></h2>
<section id="debian-stable">
<h3><a class="toc-backref" href="#id12">Debian Stable</a><a class="headerlink" href="#debian-stable" title="Permalink to this headline"></a></h3>
<p>Nuitka is now part of Debian stable, aka Jessie. Debian and Python are
the two things closest to my heart in the tech field. You can imagine
that being an upstream worthy of inclusion into Debian stable is an
import milestone to Nuitka for me.</p>
</section>
<section id="funding">
<h3><a class="toc-backref" href="#id13">Funding</a><a class="headerlink" href="#funding" title="Permalink to this headline"></a></h3>
<p>Nuitka receives the occasional <a class="reference external" href="/pages/donations.html">donation</a> and those make me very happy.
As there is no support from organization like the PSF, I am all on my
own there.</p>
<p>This year I likely will travel to Europython 2015, and would ask you to
support me with that, it’s going to be expensive.</p>
</section>
<section id="europython-2015">
<h3><a class="toc-backref" href="#id14">EuroPython 2015</a><a class="headerlink" href="#europython-2015" title="Permalink to this headline"></a></h3>
<p>I have plans to present Nuitka’s function in-lining there, real stuff,
on a fully and functional compiler that works as a drop-in replacement.</p>
<p>Not 100% sure if I can make it by the time, but things look good.
Actually so far I felt ahead of the plan, but as you know, this can
easily change at any point. But Nuitka stands on very stable grounds
code wise.</p>
</section>
<section id="collaborators">
<h3><a class="toc-backref" href="#id15">Collaborators</a><a class="headerlink" href="#collaborators" title="Permalink to this headline"></a></h3>
<p>Things are coming along nicely. When I started out, I was fully aware
that the project is something that I can do on my own if necessary, and
that has not changed. Things are going slower than necessary though, but
that’s probably very typical.</p>
<p>But you can join and should do so now, just <a class="reference external" href="/doc/user-manual.html#join-nuitka">follow this link</a> or become part of
the mailing list (since closed) and help me there with request I make,
e.g. review posts of mine, test out things, pick up small jobs, answer
questions of newcomers, you know the drill probably.</p>
<p>Nuitka is about to make break through progress. And you can be a part of
it. Now.</p>
</section>
</section>
<section id="future">
<h2><a class="toc-backref" href="#id16">Future</a><a class="headerlink" href="#future" title="Permalink to this headline"></a></h2>
<p>So, there is multiple things going on:</p>
<ul>
<li><p>More SSA usage</p>
<p>The next releases are going to be all about getting this done.</p>
<p>Once we take it to that next level, Nuitka will be able to speed up
some things by much more than the factor it basically has provided
for 2 years now, and it’s probably going to happen long before
EuroPython 2015.</p>
</li>
<li><p>Function in-lining</p>
<p>For locally declared functions, it should become possible to avoid
their creation, and make direct calls instead of ones that use
function objects and expensive parameter handling.</p>
<p>The next step there of course is to not only bind the arguments to
the function signature, but then also to in-line and potentially
specialize the function code. It’s my goal to have that at EuroPython
2015 in a form ready to show off.</p>
</li>
</ul>
<p>When these 2 things come to term, Nuitka will have made really huge
steps ahead and laid the ground for success.</p>
<p>From then on, a boatload of work remains. The infrastructure in place,
still there is going to be plenty of work to optimize more and more
things conretely, and to e.g. do type inference, and generate different
codes for booleans, ints or float values.</p>
<p>Let me know, if you are willing to help. I really need that help to make
things happen faster. Nuitka will become more and more important only.</p>
</section>
</section>

<div class="section">
    

<div class="section">
  <span style="float: left">
     Previous:
    
    <a href="nuitka-release-0512.html">
       Nuitka Release 0.5.12
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     Next: 
    <a href="nuitka-release-0513.html">
      Nuitka Release 0.5.13 
    </a>
    
  </span>
</div>
  
</div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kay Hayen and Nuitka Contributors.</p>
  </div>

  
<div class='share-button-container'>
    <div class="socialbutton-wrapper">
        <a href="https://twitter.com/share?url=https://nuitka.net/posts/nuitka-progress-spring-2015.html&hashtags=nuitka" target="_blank">
            <div class="socialbutton twitter" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-twitter.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="https://www.facebook.com/sharer.php?u=https://nuitka.net/posts/nuitka-progress-spring-2015.html&hashtag=%23nuitka"  target="_blank">
            <div class="socialbutton facebook" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-facebook.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="http://www.reddit.com/submit?url=https://nuitka.net/posts/nuitka-progress-spring-2015.html" target="_blank">
            <div class="socialbutton reddit">
                <p class="icon">
                    <img src="/_static/icon-reddit.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>
    </div>
</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>