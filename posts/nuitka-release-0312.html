<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nuitka Release 0.3.12</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" type="text/css" />
    <link rel="canonical" href="https://nuitka.net/posts/nuitka-release-0312.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />   
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Nuitka Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Nuitka the Python Compiler
          </a><!-- Empty override file take the place of searchbox.html, which generates search box. -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Commercial Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/commercial.html">Nuitka Commercial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html">Nuitka Release 0.6.20 (Draft)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-19">Nuitka Release 0.6.19</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-18">Nuitka Release 0.6.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#older-releases">Older Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/roadmap.html">Roadmap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/api-doc.html">API doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/factory.html">Factory Instructions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Media</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/Presentations.html">Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/Streaming.html">Streaming</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/impressum.html">Impressum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Under construction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/pyside2.html">Nuitka PySide2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/donations.html">Donations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/gsoc2019.html">Google Summer of Code 2019</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nuitka the Python Compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <div class="section" id="nuitka-release-0-3-12">
<h1>Nuitka Release 0.3.12<a class="headerlink" href="#nuitka-release-0-3-12" title="Permalink to this headline"></a></h1>
<p>This is to inform you about the new stable release of <a class="reference external" href="https://nuitka.net">Nuitka</a>. It is the extremely compatible Python compiler,
<a class="reference external" href="/doc/download.html">“download now”</a>.</p>
<p>This is to inform you about the new release of Nuitka many bug fixes,
and substantial improvements especially in the organisational area.
There is a new <a class="reference external" href="https://nuitka.net/doc/user-manual.html">User Manual</a>
(<a class="reference external" href="https://nuitka.net/doc/user-manual.pdf">PDF</a>), with much improved
content, a <code class="docutils literal notranslate"><span class="pre">sys.meta_path</span></code> based import mechanism for <code class="docutils literal notranslate"><span class="pre">--deep</span></code> mode,
git flow goodness.</p>
<p>This release is generally also the result of working towards compilation
of a real programs (Mercurial) and to get things work more nicely on
Windows by default. Thanks go to Liu Zhenhai for helping me with this
goal.</p>
<p>Due to the use of the “git flow”, most of the bugs listed here were
already fixed in on the stable release before this release. And there
were many of these.</p>
<div class="section" id="bug-fixes">
<h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline"></a></h2>
<ul>
<li><p>The order of evaluation for base classes and class dictionaries was
not enforced.</p>
<p>Apparently nothing in the CPython test suite did that, I only noticed
during debugging that Nuitka gave a different error than CPython did,
for a class that had an undefined base class, because both class body
and base classes were giving an error. Fixed in 0.3.11a already.</p>
</li>
<li><p>Method objects didn’t hold a reference to the used class.</p>
<p>The effect was only noticed when <code class="docutils literal notranslate"><span class="pre">--python-debug</span></code> was used, i.e.
the debug version of Python linked, because then the garbage
collector makes searches. Fixed in 0.3.11b already.</p>
</li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">sys.executable</span></code> on Linux as well. On Debian it is otherwise
<code class="docutils literal notranslate"><span class="pre">/usr/bin/python</span></code> which might be a different version of Python
entirely. Fixed in 0.3.11c already.</p></li>
<li><p>Embedded modules inside a package could hide package variables of the
same name. Learned during PyCON DE about this corner case. Fixed in
0.3.11d already.</p></li>
<li><p>Packages could be duplicated internally. This had no effect on
generated code other than appearing twice in the list if frozen
modules. Fixed in 0.3.11d already.</p></li>
<li><p>When embedding modules from outside current directory, the look-up
failed. The embedding only ever worked for the compile itself and
programs test cases, because they are all in the current directory
then. Fixed in 0.3.11e already.</p></li>
<li><p>The check for ARM target broke Windows support in the Scons file.
Fixed in 0.3.11f already.</p></li>
<li><p>The star import from external modules failed with an error in
<code class="docutils literal notranslate"><span class="pre">--deep</span></code> mode. Fixed in 0.3.11g already.</p></li>
<li><p>Modules with a parent package could cause a problem under some
circumstances. Fixed in 0.3.11h already.</p></li>
<li><p>One call variant, with both list and dict star arguments and keyword
arguments, but no positional parameters, didn’t have the required C++
helper function implemented. Fixed in 0.3.11h already.</p></li>
<li><p>The detection of the CPU core count was broken on my hexacore at
least. Gave 36 instead of 6, which is a problem for large programs.
Fixed in 0.3.11h already.</p></li>
<li><p>The in-line copy of Scons didn’t really work on Windows, which was
sad, because we added it to simplify installation on Windows
precisely because of this.</p></li>
<li><p>Cleaning up the build directory from old sources and object files
wasn’t portable to Windows and therefore wasn’t effective there.</p></li>
<li><p>From imports where part of the imported were found modules and parts
were not, didn’t work. Solved by the feature branch
<code class="docutils literal notranslate"><span class="pre">meta_path_import</span></code> that was merged for this release.</p></li>
<li><p>Newer MinGW gave warnings about the default visibility not being
possible to apply to class members. Fixed by not setting this default
visibility anymore on Windows.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">sys.executable</span></code> gave warnings on Windows because of
backslashes in the path. Using a raw string to prevent such problems.</p></li>
<li><p>The standard library path was hard coded. Changed to run time
detection.</p></li>
</ul>
</div>
<div class="section" id="cleanups">
<h2>Cleanups<a class="headerlink" href="#cleanups" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Version checks on Python runtime now use a new define
<code class="docutils literal notranslate"><span class="pre">PYTHON_VERSION</span></code> that makes it easier. I don’t like
<code class="docutils literal notranslate"><span class="pre">PY_VERSION_HEX</span></code>, because it is so unreadable. Makes some of the
checks a lot more safe.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">sys.meta_path</span></code> based import from the <code class="docutils literal notranslate"><span class="pre">meta_path_import</span></code>
feature branch allowed the cleanup the way importing is done. It’s a
lot less code now.</p></li>
<li><p>Removed some unused code. We will aim at making Nuitka the tool to
detect dead code really.</p></li>
<li><p>Moved <code class="docutils literal notranslate"><span class="pre">nuitka.Nodes</span></code> to <code class="docutils literal notranslate"><span class="pre">nuitka.nodes.Nodes</span></code>, that is what the
package is intended for, the split will come later.</p></li>
</ul>
</div>
<div class="section" id="new-tests">
<h2>New Tests<a class="headerlink" href="#new-tests" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>New tests for import variants that previously didn’t work: Mixed
imports. Imports from a package one level up. Modules hidden by a
package variable, etc.</p></li>
<li><p>Added test of function call variant that had no test previously. Only
found it when compiling “hg”. Amazing how nothing in my tests,
CPython tests, etc. used it.</p></li>
<li><p>Added test to cover the partial success of import statements.</p></li>
<li><p>Added test to cover evaluation order of class definitions.</p></li>
</ul>
</div>
<div class="section" id="organisational">
<h2>Organisational<a class="headerlink" href="#organisational" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Migrated the “README.txt” from org-mode to ReStructured Text, which
allows for a more readable document, and to generate a nice <a class="reference external" href="https://nuitka.net/doc/user-manual.html">User
Manual</a> in PDF form.</p></li>
<li><p>The amount of information in “README.txt” was increased, with many
more subjects are now covered, e.g. “git flow” and how to join Nuitka
development. It’s also impressive to see what code blocks and syntax
highlighting can do for readability.</p></li>
<li><p>The Nuitka git repository has seen multiple hot fixes.</p>
<p>These allowed to publish bug fixes immediately after they were made,
and avoided the need for a new release just to get these out. This
really saves me a lot of time too, because I can postpone releasing
the new version until it makes sense because of other things.</p>
</li>
<li><p>Then there was a feature branch <code class="docutils literal notranslate"><span class="pre">meta_path_import</span></code> that lived until
being merged to <code class="docutils literal notranslate"><span class="pre">develop</span></code> to improve the import code, which is now
released as part of the main branch. Getting that feature right took
a while.</p></li>
<li><p>And there is the feature branch <code class="docutils literal notranslate"><span class="pre">minimize_CPython26_tests_diff</span></code>
which has some success already in documenting the required changes to
the “CPython26” test suite and in reducing the amount of differences,
while doing it. We have a frame stack working there, albeit in too
ugly code form.</p></li>
<li><p>The release archives are now built using <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>. You can now
also download a zip file, which is probably more Windows friendly.
The intention is to work on that to make <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> produce a
Nuitka install that won’t rely on any environment variables at all.
Right now <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> won’t even allow any other options than
<code class="docutils literal notranslate"><span class="pre">sdist</span></code> to be given.</p></li>
<li><p>Ported “compile_itself.sh” to “compile_itself.py”, i.e. ported it to
Python. This way, we can execute it easily on Windows too, where it
currently still fails. Replacing <code class="docutils literal notranslate"><span class="pre">diff</span></code>, <code class="docutils literal notranslate"><span class="pre">rm</span> <span class="pre">-rf</span></code>, etc. is a
challenge, but it reduces the dependency on MSYS tools on Windows.</p></li>
<li><p>The compilation of standard library is disabled by default, but
<code class="docutils literal notranslate"><span class="pre">site</span></code> or <code class="docutils literal notranslate"><span class="pre">dist</span></code> packages are now embedded. To include even
standard library, there is a <code class="docutils literal notranslate"><span class="pre">--really-deep</span></code> option that has to be
given in addition to <code class="docutils literal notranslate"><span class="pre">--deep</span></code>, which forces this.</p></li>
</ul>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline"></a></h2>
<p>Again, huge progress. The improved import mechanism is very beautiful.
It appears that little is missing to compile real world programs like
“hg” with Nuitka. The next release cycle will focus on that and continue
to improve the Windows support which appears to have some issues.</p>
</div>
</div>

<div class="section">
    

<div class="section">
  <span style="float: left">
     Previous:
    
    <a href="nuitka---pycon-de-video.html">
       Nuitka - PyCON DE Video
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     Next: 
    <a href="puting-a-conference-t-shirt-to-good-use.html">
      Putting a conference T-shirt to good use 
    </a>
    
  </span>
</div>
  
</div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kay Hayen and Nuitka Contributors.</p>
  </div>

  
<div class='share-button-container'>
    <div class="socialbutton-wrapper">
        <a href="https://twitter.com/share?url=https://nuitka.net/posts/nuitka-release-0312.html&hashtags=nuitka" target="_blank">
            <div class="socialbutton twitter" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-twitter.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="https://www.facebook.com/sharer.php?u=https://nuitka.net/posts/nuitka-release-0312.html&hashtag=%23nuitka"  target="_blank">
            <div class="socialbutton facebook" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-facebook.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="http://www.reddit.com/submit?url=https://nuitka.net/posts/nuitka-release-0312.html" target="_blank">
            <div class="socialbutton reddit">
                <p class="icon">
                    <img src="/_static/icon-reddit.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>
    </div>
</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>