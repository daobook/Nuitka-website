<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nuitka Release 0.5.10</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/asciinema-player_2.6.1.css" type="text/css" />
      <link rel="stylesheet" href="../_static/asciinema-custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" type="text/css" />
    <link rel="canonical" href="https://nuitka.net/posts/nuitka-release-0510.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/tabs.js"></script>
        <script src="../_static/asciinema-player_2.6.1.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />   
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Nuitka Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Nuitka the Python Compiler
            <img src="../_static/Nuitka-Logo-Symbol.png" class="logo" alt="Logo"/>
          </a><!-- Empty override file take the place of searchbox.html, which generates search box. -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Commercial Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/commercial.html">Nuitka Commercial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html">Nuitka Release 0.6.19 (Draft)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-18">Nuitka Release 0.6.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-17">Nuitka Release 0.6.17</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#older-releases">Older Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/roadmap.html">Roadmap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/api-doc.html">API doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/factory.html">Factory Instructions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Media</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/Presentations.html">Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/Streaming.html">Streaming</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/impressum.html">Impressum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Under construction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/pyside2.html">Nuitka PySide2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/donations.html">Donations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/gsoc2019.html">Google Summer of Code 2019</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/nuitka-demo.html">Nuitka Demo</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nuitka the Python Compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <section id="nuitka-release-0-5-10">
<h1>Nuitka Release 0.5.10<a class="headerlink" href="#nuitka-release-0-5-10" title="Permalink to this headline"></a></h1>
<p>This is to inform you about the new stable release of <a class="reference external" href="https://nuitka.net">Nuitka</a>. It is the extremely compatible Python compiler,
<a class="reference external" href="/doc/download.html">“download now”</a>.</p>
<p>This release has a focus on code generation optimization. Doing major
changes away from “C++-ish” code to “C-ish” code, many constructs are
now faster or got looked at and optimized.</p>
<section id="bug-fixes">
<h2>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Compatibility: The variable name in locals for the iterator provided
to the generator expression should be <code class="docutils literal notranslate"><span class="pre">.0</span></code>, now it is.</p></li>
<li><p>Generators could leak frames until program exit, these are now
properly freed immediately.</p></li>
</ul>
</section>
<section id="optimization">
<h2>Optimization<a class="headerlink" href="#optimization" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Faster exception save and restore functions that might be in-lined by
the backend C compiler.</p></li>
<li><p>Faster error checks for many operations, where these errors are
expected, e.g. instance attribute lookups.</p></li>
<li><p>Do not create traceback and locals dictionary for frame when
<code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> or <code class="docutils literal notranslate"><span class="pre">GeneratorExit</span></code> are raised. These tracebacks
were wasted, as they were immediately released afterwards.</p></li>
<li><p>Closure variables to functions and parameters of generator functions
are now attached to the function and generator objects.</p></li>
<li><p>The creation of functions with closure taking was accelerated.</p></li>
<li><p>The creation and destruction of generator objects was accelerated.</p></li>
<li><p>The re-formulation for in-place assignments got simplified and got
faster doing so.</p></li>
<li><p>In-place operations of <code class="docutils literal notranslate"><span class="pre">str</span></code> were always copying the string, even
if was not necessary.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">+=</span> <span class="n">b</span>  <span class="c1"># Was not re-using the storage of &quot;a&quot; in case of strings</span>
</pre></div>
</div>
</li>
<li><p>Python2: Additions of <code class="docutils literal notranslate"><span class="pre">int</span></code> for Python2 are now even faster.</p></li>
<li><p>Access to local variable values got slightly accelerated at the
expense of closure variables.</p></li>
<li><p>Added support for optimizing the <code class="docutils literal notranslate"><span class="pre">complex</span></code> built-in.</p></li>
<li><p>Removing unused temporary and local variables as a result of
optimization, these previously still allocated storage.</p></li>
</ul>
</section>
<section id="cleanup">
<h2>Cleanup<a class="headerlink" href="#cleanup" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>The use of C++ classes for variable objects was removed. Closure
variables are now attached as <code class="docutils literal notranslate"><span class="pre">PyCellObject</span></code> to the function
objects owning them.</p></li>
<li><p>The use of C++ context classes for closure taking and generator
parameters has been replaced with attaching values directly to
functions and generator objects.</p></li>
<li><p>The indentation of code template instantiations spanning multiple was
not in all cases proper. We were using emission objects that handle
it new lines in code and mere <code class="docutils literal notranslate"><span class="pre">list</span></code> objects, that don’t handle
them in mixed forms. Now only the emission objects are used.</p></li>
<li><p>Some templates with C++ helper functions that had no variables got
changed to be properly formatted templates.</p></li>
<li><p>The internal API for handling of exceptions is now more consistent
and used more efficiently.</p></li>
<li><p>The printing helpers got cleaned up and moved to static code,
removing any need for forward declaration.</p></li>
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">INCREASE_REFCOUNT_X</span></code> was removed, it got replaced with
proper <code class="docutils literal notranslate"><span class="pre">Py_XINCREF</span></code> usages. The function was once required before
“C-ish” lifted the need to do everything in one function call.</p></li>
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">INCREASE_REFCOUNT</span></code> got reduced. See above for why that
is any good. The idea is that <code class="docutils literal notranslate"><span class="pre">Py_INCREF</span></code> must be good enough, and
that we want to avoid the C function it was, even if in-lined.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">assertObject</span></code> function that checks if an object is not
<code class="docutils literal notranslate"><span class="pre">NULL</span></code> and has positive reference count, i.e. is sane, got turned
into a preprocessor macro.</p></li>
<li><p>Deep hashes of constant values created in <code class="docutils literal notranslate"><span class="pre">--debug</span></code> mode, which
cover also mutable values, and attempt to depend on actual content.
These are checked at program exit for corruption. This may help
uncover bugs.</p></li>
</ul>
</section>
<section id="organisational">
<h2>Organisational<a class="headerlink" href="#organisational" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Speedcenter has been enhanced with better graphing and has more
benchmarks now. More work will be needed to make it useful.</p></li>
<li><p>Updates to the Developer Manual, reflecting the current near finished
state of “C-ish” code generation.</p></li>
</ul>
</section>
<section id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>New reference count tests to cover generator expressions and their
usage got added.</p></li>
<li><p>Many new construct based tests got added, these will be used for
performance graphing, and serve as micro benchmarks now.</p></li>
<li><p>Again, more basic tests are directly executable with Python3.</p></li>
</ul>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline"></a></h2>
<p>This is the next evolution of “C-ish” coming to pass. The use of C++ has
for all practical purposes vanished. It will remain an ongoing activity
to clear that up and become real C. The C++ classes were a huge road
block to many things, that now will become simpler. One example of these
were in-place operations, which now can be dealt with easily.</p>
<p>Also, lots of polishing and tweaking was done while adding construct
benchmarks that were made to check the impact of these changes. Here,
generators probably stand out the most, as some of the missed
optimization got revealed and then addressed.</p>
<p>Their speed increases will be visible to some programs that depend a lot
on generators.</p>
<p>This release is clearly major in that the most important issues got
addressed, future releases will provide more tuning and completeness,
but structurally the “C-ish” migration has succeeded, and now we can
reap the benefits in the coming releases. More work will be needed for
all in-place operations to be accelerated.</p>
<p>More work will be needed to complete this, but it’s good that this is
coming to an end, so we can focus on SSA based optimization for the
major gains to be had.</p>
</section>
</section>

<div class="section">
    

<div class="section">
  <span style="float: left">
     Previous:
    
    <a href="nuitka-progress-2014.html">
       Nuitka progress 2014
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     Next: 
    <a href="nuitka-release-0511.html">
      Nuitka Release 0.5.11 
    </a>
    
  </span>
</div>
  
</div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kay Hayen and Nuitka Contributors.</p>
  </div>

  
<div class='share-button-container'>
    <div class="socialbutton-wrapper">
        <a href="https://twitter.com/share?url=https://nuitka.net/posts/nuitka-release-0510.html&hashtags=nuitka" target="_blank">
            <div class="socialbutton twitter" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-twitter.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="https://www.facebook.com/sharer.php?u=https://nuitka.net/posts/nuitka-release-0510.html&hashtag=%23nuitka"  target="_blank">
            <div class="socialbutton facebook" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-facebook.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="http://www.reddit.com/submit?url=https://nuitka.net/posts/nuitka-release-0510.html" target="_blank">
            <div class="socialbutton reddit">
                <p class="icon">
                    <img src="/_static/icon-reddit.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
      $('a[href^="http://"], a[href^="https://"]').not('a[class*=internal]').attr('target', '_blank');
    });
  </script>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-V73VK1T804"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-V73VK1T804', {
          'anonymize_ip': true,
      });
    </script> 

</body>
</html>