<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nuitka Release 0.5.27</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/asciinema-player_2.6.1.css" type="text/css" />
      <link rel="stylesheet" href="../_static/asciinema-custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" type="text/css" />
    <link rel="canonical" href="https://nuitka.net/posts/nuitka-release-0527.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/tabs.js"></script>
        <script src="../_static/asciinema-player_2.6.1.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />   
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Nuitka Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Nuitka the Python Compiler
            <img src="../_static/Nuitka-Logo-Symbol.png" class="logo" alt="Logo"/>
          </a><!-- Empty override file take the place of searchbox.html, which generates search box. -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Commercial Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/commercial.html">Nuitka Commercial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html">Nuitka Release 0.6.19 (Draft)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-18">Nuitka Release 0.6.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-17">Nuitka Release 0.6.17</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#older-releases">Older Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/roadmap.html">Roadmap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/api-doc.html">API doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/factory.html">Factory Instructions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Media</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/Presentations.html">Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/Streaming.html">Streaming</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/impressum.html">Impressum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Under construction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/pyside2.html">Nuitka PySide2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/donations.html">Donations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/gsoc2019.html">Google Summer of Code 2019</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/nuitka-demo.html">Nuitka Demo</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nuitka the Python Compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <section id="nuitka-release-0-5-27">
<h1>Nuitka Release 0.5.27<a class="headerlink" href="#nuitka-release-0-5-27" title="Permalink to this headline"></a></h1>
<p>This is to inform you about the new stable release of <a class="reference external" href="https://nuitka.net">Nuitka</a>. It is the extremely compatible Python compiler,
<a class="reference external" href="/doc/download.html">“download now”</a>.</p>
<p>This release comes a lot of bug fixes and improvements.</p>
<section id="bug-fixes">
<h2>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Fix, need to add recursed modules immediately to the working set, or
else they might first be processed in second pass, where global names
that are locally assigned, are optimized to the built-in names
although that should not happen. Fixed in 0.5.26.1 already.</p></li>
<li><p>Fix, the accelerated call of methods could crash for some special
types. This had been a regress of 0.5.25, but only happens with
custom extension types. Fixed in 0.5.26.1 already.</p></li>
<li><p>Python3.5: For <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code> functions parameter variables could fail
to properly work with in-place assignments to them. Fixed in 0.5.26.4
already.</p></li>
<li><p>Compatibility: Decorators that overload type checks didn’t pass the
checks for compiled types. Now <code class="docutils literal notranslate"><span class="pre">isinstance</span></code> and as a result
<code class="docutils literal notranslate"><span class="pre">inspect</span></code> module work fine for them.</p></li>
<li><p>Compatibility: Fix, imports from <code class="docutils literal notranslate"><span class="pre">__init__</span></code> were crashing the
compiler. You are not supposed to do them, because they duplicate the
package code, but they work.</p></li>
<li><p>Compatibility: Fix, the <code class="docutils literal notranslate"><span class="pre">super</span></code> built-in on module level was
crashing the compiler.</p></li>
<li><p>Standalone: For Linux, BSD and macOS extension modules and shared
libraries using their own <code class="docutils literal notranslate"><span class="pre">$ORIGIN</span></code> to find loaded DLLs resulted in
those not being included in the distribution.</p></li>
<li><p>Standalone: Added more missing implicit dependencies.</p></li>
<li><p>Standalone: Fix, implicit imports now also can be optional, as e.g.
<code class="docutils literal notranslate"><span class="pre">_tkinter</span></code> if not installed. Only include those if available.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--recompile-c-only</span></code> was only working with C compiler as a
backend, but not in the C++ compatibility fallback, where files get
renamed. This prevented that edit and test debug approach with at
least MSVC.</p></li>
<li><p>Plugins: The PyLint plug-in didn’t consider the symbolic name
<code class="docutils literal notranslate"><span class="pre">import-error</span></code> but only the code <code class="docutils literal notranslate"><span class="pre">F0401</span></code>.</p></li>
<li><p>Implicit exception raises in conditional expressions would crash the
compiler.</p></li>
</ul>
</section>
<section id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Added support for Visual Studio 2017.</p></li>
<li><p>Added option <code class="docutils literal notranslate"><span class="pre">--python2-for-scons</span></code> to specify the Python2 execute
to use for calling Scons. This should allow using Anaconda Python for
that task.</p></li>
</ul>
</section>
<section id="optimization">
<h2>Optimization<a class="headerlink" href="#optimization" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>References to known unassigned variables are now statically optimized
to exception raises and warned about if the according option is
enabled.</p></li>
<li><p>Unhashable keys in dictionaries are now statically optimized to
exception raises and warned about if the according option is enabled.</p></li>
<li><p>Enable forward propagation for classes too, resulting in some classes
to create only static dictionaries. Currently this never happens for
Python3, but it will, once we can statically optimize <code class="docutils literal notranslate"><span class="pre">__prepare__</span></code>
too.</p></li>
<li><p>Enable inlining of class dictionary creations if they are mere return
statements of the created dictionary. Currently this never happens
for Python3, see above for why.</p></li>
<li><p>Python2: Selecting the metaclass is now visible in the tree and can
be statically optimized.</p></li>
<li><p>For executables, we now also use a freelist for traceback objects,
which also makes exception cases slightly faster.</p></li>
<li><p>Generator expressions no longer require the use of a function call
with a <code class="docutils literal notranslate"><span class="pre">.0</span></code> argument value to carry the iterator value, instead
their creation is directly inlined.</p></li>
<li><p>Remove “pass through” frames for Python2 list contractions, they are
no longer needed. Minimal gain for generated code, but more
lightweight at compile time.</p></li>
<li><p>When compiling Windows x64 with MinGW64 a link library needs to be
created for linking against the Python DLL. This one is now cached
and re-used if already done.</p></li>
<li><p>Use common code for <code class="docutils literal notranslate"><span class="pre">NameError</span></code> and <code class="docutils literal notranslate"><span class="pre">UnboundLocalError</span></code> exception
code raises. In some cases it was creating the full string at compile
time, in others at run time. Since the later is more efficient in
terms of code size, we now use that everywhere, saving a bit of
binary size.</p></li>
<li><p>Make sure to release unused functions from a module. This saves
memory and can be decided after a full pass.</p></li>
<li><p>Avoid using <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code> in a couple of places, where they are not
needed, but can be replaced with a later sorting, e.g. temporary
variables by name, to achieve deterministic output. This saves memory
at compile time.</p></li>
<li><p>Add specialized return nodes for the most frequent constant values,
which are <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">True</span></code>, and <code class="docutils literal notranslate"><span class="pre">False</span></code>. Also a general one, for
constant value return, which avoids the constant references. This
saves quite a bit of memory and makes traversal of the tree a lot
faster, due to not having any child nodes for the new forms of return
statements.</p></li>
<li><p>Previously the empty dictionary constant reference was specialized to
save memory. Now we also specialize empty set, list, and tuple
constants to the same end. Also the hack to make <code class="docutils literal notranslate"><span class="pre">is</span></code> not say that
<code class="docutils literal notranslate"><span class="pre">{}</span> <span class="pre">is</span> <span class="pre">{}</span></code> was made more general, mutable constant references and
now known to never alias.</p></li>
<li><p>The source references can be marked internal, which means that they
should never be visible to the user, but that was tracked as a flag
to each of the many source references attached to each node in the
tree. Making a special class for internal references avoids storing
this in the object, but instead it’s now a class property.</p></li>
<li><p>The nodes for named variable reference, assignment, and deletion got
split into separate nodes, one to be used before the actual variable
can be determined during tree building, and one for use later on.
This makes their API clearer and saves a tiny bit of memory at
compile time.</p></li>
<li><p>Also eliminated target variable references, which were pseudo
children of assignments and deletion nodes for variable names, that
didn’t really do much, but consume processing time and memory.</p></li>
<li><p>Added optimization for calls to <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code> and <code class="docutils literal notranslate"><span class="pre">classmethod</span></code>
built-in methods along with type shapes.</p></li>
<li><p>Added optimization for <code class="docutils literal notranslate"><span class="pre">open</span></code> built-in on Python3, also adding the
type shape <code class="docutils literal notranslate"><span class="pre">file</span></code> for the result.</p></li>
<li><p>Added optimization for <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> built-in and constant values.
These mutable constants can now be compile time computed as well.</p></li>
<li><p>Added optimization for <code class="docutils literal notranslate"><span class="pre">frozenset</span></code> built-in and constant values.
These mutable constants can now be compile time computed as well.</p></li>
<li><p>Added optimization for <code class="docutils literal notranslate"><span class="pre">divmod</span></code> built-in.</p></li>
<li><p>Treat all built-in constant types, e.g. <code class="docutils literal notranslate"><span class="pre">type</span></code> itself as a
constant. So far we did this only for constant values types, but of
course this applies to all types, giving slightly more compact code
for their uses.</p></li>
<li><p>Detect static raises if iterating over non-iterables and warn about
them if the option is enabled.</p></li>
<li><p>Split of <code class="docutils literal notranslate"><span class="pre">locals</span></code> node into different types, one which needs the
updated value, and one which just makes a copy. Properly track if a
functions needs an updated locals dict, and if it doesn’t, don’t use
that. This gives more efficient code for Python2 classes, and
<code class="docutils literal notranslate"><span class="pre">exec</span></code> using functions in Python2.</p></li>
<li><p>Build all constant values without use of the <code class="docutils literal notranslate"><span class="pre">pickle</span></code> module which
has a lot more overhead than <code class="docutils literal notranslate"><span class="pre">marshal</span></code>, instead use that for too
large <code class="docutils literal notranslate"><span class="pre">long</span></code> values, non-UTF8 <code class="docutils literal notranslate"><span class="pre">unicode</span></code> values, <code class="docutils literal notranslate"><span class="pre">nan</span></code> float,
etc.</p></li>
<li><p>Detect the linker arch for all Linux platforms using <code class="docutils literal notranslate"><span class="pre">objdump</span></code>
instead of only a hand few hard coded ones.</p></li>
</ul>
</section>
<section id="cleanups">
<h2>Cleanups<a class="headerlink" href="#cleanups" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">INCREASE_REFCOUNT</span></code> got fully eliminated.</p></li>
<li><p>Use functions not vulenerable for buffer overflow. This is generally
good and avoids warnings given on OpenBSD during linking.</p></li>
<li><p>Variable closure for classes is different from all functions, don’t
handle the difference in the base class, but for class nodes only.</p></li>
<li><p>Make sure <code class="docutils literal notranslate"><span class="pre">mayBeNone</span></code> doesn’t return <code class="docutils literal notranslate"><span class="pre">None</span></code> which means normally
“unclear”, but <code class="docutils literal notranslate"><span class="pre">False</span></code> instead, since it’s always clear for those
cases.</p></li>
<li><p>Comparison nodes were using the general comparison node as a base
class, but now a proper base class was added instead, allowing for
cleaner code.</p></li>
<li><p>Valgrind test runners got changed to using proper tool namespace for
their code and share it.</p></li>
<li><p>Made construct case generation code common testing code for re-use in
the speedcenter web site. The code also has minor beauty bugs which
will then become fixable.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">appdirs</span></code> package to determine place to store the downloaded
copy of <code class="docutils literal notranslate"><span class="pre">depends.exe</span></code>.</p></li>
<li><p>The code still mentioned C++ in a lot of places, in comments or
identifiers, which might be confusing readers of the code.</p></li>
<li><p>Code objects now carry all information necessary for their creation,
and no longer need to access their parent to determine flag values.
That parent is subject to change in the future.</p></li>
<li><p>Our import sorting wrapper automatically detects imports that could
be local and makes them so, removing a few existing ones and
preventing further ones on the future.</p></li>
<li><p>Cleanups and annotations to become Python3 PyLint clean as well. This
found e.g. that source code references only had <code class="docutils literal notranslate"><span class="pre">__cmp__</span></code> and need
rich comparison to be fully portable.</p></li>
</ul>
</section>
<section id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>The test runner for construct tests got cleaned up and the constructs
now avoid using <code class="docutils literal notranslate"><span class="pre">xrange</span></code> so as to not need conversion for Python3
execution as much.</p></li>
<li><p>The main test runner got cleaned up and uses common code making it
more versatile and robust.</p></li>
<li><p>Do not run test in debugger if CPython also segfaulted executing the
test, then it’s not a Nuitka issue, so we can ignore that.</p></li>
<li><p>Improve the way the Python to test with is found in the main test
runner, prefer the running interpreter, then <code class="docutils literal notranslate"><span class="pre">PATH</span></code> and registry on
Windows, this will find the interesting version more often.</p></li>
<li><p>Added support for “Landscape.io” to ignore the inline copies of code,
they are not under our control.</p></li>
<li><p>The test runner for Valgrind got merged with the usage for constructs
and uses common code now.</p></li>
<li><p>Construct generation is now common code, intended for sharing it with
the Speedcenter web site generation.</p></li>
<li><p>Rebased Python 3.6 test suite to 3.6.1 as that is the Python
generally used now.</p></li>
</ul>
</section>
<section id="organisational">
<h2>Organisational<a class="headerlink" href="#organisational" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Added inline copy of <code class="docutils literal notranslate"><span class="pre">appdirs</span></code> package from PyPI.</p></li>
<li><p>Added credits for RedBaron and isort.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--experimental</span></code> flag is now creating a list of indications and
more than one can be used that way.</p></li>
<li><p>The PyLint runner can also work with Python3 pylint.</p></li>
<li><p>The Nuitka Speedcenter got more fine tuning and produces more tags to
more easily identify trends in results. This needs to become more
visible though.</p></li>
<li><p>The MSI files are also built on AppVeyor, where their building will
not depend on me booting Windows. Getting these artifacts as
downloads will be the next step.</p></li>
</ul>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline"></a></h2>
<p>This release improves many areas. The variable closure taking is now
fully transparent due to different node types, the memory usage dropped
again, a few obvious missing static optimizations were added, and many
built-ins were completed.</p>
<p>This release again improves the scalability of Nuitka, which again uses
less memory than before, although not an as big jump as before.</p>
<p>This does not extend or use special C code generation for <code class="docutils literal notranslate"><span class="pre">bool</span></code> or
any type yet, which still needs design decisions to proceed and will
come in a later release.</p>
</section>
</section>

<div class="section">
    

<div class="section">
  <span style="float: left">
     Previous:
    
    <a href="nuitka-release-0526.html">
       Nuitka Release 0.5.26
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     Next: 
    <a href="nuitka-release-0528.html">
      Nuitka Release 0.5.28 
    </a>
    
  </span>
</div>
  
</div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kay Hayen and Nuitka Contributors.</p>
  </div>

  
<div class='share-button-container'>
    <div class="socialbutton-wrapper">
        <a href="https://twitter.com/share?url=https://nuitka.net/posts/nuitka-release-0527.html&hashtags=nuitka" target="_blank">
            <div class="socialbutton twitter" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-twitter.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="https://www.facebook.com/sharer.php?u=https://nuitka.net/posts/nuitka-release-0527.html&hashtag=%23nuitka"  target="_blank">
            <div class="socialbutton facebook" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-facebook.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="http://www.reddit.com/submit?url=https://nuitka.net/posts/nuitka-release-0527.html" target="_blank">
            <div class="socialbutton reddit">
                <p class="icon">
                    <img src="/_static/icon-reddit.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
      $('a[href^="http://"], a[href^="https://"]').not('a[class*=internal]').attr('target', '_blank');
    });
  </script>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-V73VK1T804"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-V73VK1T804', {
          'anonymize_ip': true,
      });
    </script> 

</body>
</html>