<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nuitka Release 0.5.28</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" type="text/css" />
    <link rel="canonical" href="https://nuitka.net/posts/nuitka-release-0528.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />   
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Nuitka Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Nuitka the Python Compiler
            <img src="../_static/Nuitka-Logo-Symbol.svg" class="logo" alt="Logo"/>
          </a><!-- Empty override file take the place of searchbox.html, which generates search box. -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/user-manual.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Commercial Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/commercial.html">Nuitka Commercial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html">Nuitka Release 0.6.20 (Draft)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-19">Nuitka Release 0.6.19</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-18">Nuitka Release 0.6.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#older-releases">Older Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/roadmap.html">Roadmap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/developer-manual.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/api-doc.html">API doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/factory.html">Factory Instructions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Media</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/Presentations.html">Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/Streaming.html">Streaming</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/impressum.html">Impressum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Under construction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/pyside2.html">Nuitka PySide2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/donations.html">Donations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/gsoc2019.html">Google Summer of Code 2019</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nuitka the Python Compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <div class="section" id="nuitka-release-0-5-28">
<h1>Nuitka Release 0.5.28<a class="headerlink" href="#nuitka-release-0-5-28" title="Permalink to this headline"></a></h1>
<p>This is to inform you about the new stable release of <a class="reference external" href="https://nuitka.net">Nuitka</a>. It is the extremely compatible Python compiler,
<a class="reference external" href="/doc/download.html">“download now”</a>.</p>
<p>This release has a focus on compatibility work and contains bug fixes
and work to enhance the usability of Nuitka by integrating with
distutils. The major improvement is that contractions no longer use
pseudo functions to achieve their own local scope, but that there is now
a dedicated structure for that representing an in-lined function.</p>
<div class="section" id="bug-fixes">
<h2>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Python3.6: Fix, <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code> was not yet implemented for async
generators.</p></li>
<li><p>Fix, functions with keyword arguments where the value was determined
to be a static raise could crash the compiler.</p></li>
<li><p>Detect using MinGW64 32 bits C compiler being used with 64 bits
Python with better error message.</p></li>
<li><p>Fix, when extracting side effects of a static raise, extract them
more recursively to catch expressions that themselves have no code
generation being used. This fixes at least static raises in keyword
arguments of a function call.</p></li>
<li><p>Compatibility: Added support for proper operation of
<code class="docutils literal notranslate"><span class="pre">pkgutil.get_data</span></code> by implementing <code class="docutils literal notranslate"><span class="pre">get_data</span></code> in our meta path
based loader.</p></li>
<li><p>Compatibility: Added <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> module attribute was previously
missing, present on Python3.4 and higher.</p></li>
<li><p>Compatibility: Made <code class="docutils literal notranslate"><span class="pre">__loader__</span></code> module attribute set when the
module is loading already.</p></li>
<li><p>Standalone: Resolve the <code class="docutils literal notranslate"><span class="pre">&#64;rpath</span></code> and <code class="docutils literal notranslate"><span class="pre">&#64;loader_path</span></code> from
<code class="docutils literal notranslate"><span class="pre">otool</span></code> on macOS manually to actual paths, which adds support for
libraries compiled with that.</p></li>
<li><p>Fix, nested functions calling <code class="docutils literal notranslate"><span class="pre">super</span></code> could crash the compiler.</p></li>
<li><p>Fix, could not use <code class="docutils literal notranslate"><span class="pre">--recurse-directory</span></code> with arguments that had a
trailing slash.</p></li>
<li><p>Fix, using <code class="docutils literal notranslate"><span class="pre">--recurse-directory</span></code> on packages that are not in the
search crashed the compiler.</p></li>
<li><p>Compatibility: Python2 <code class="docutils literal notranslate"><span class="pre">set</span></code> and <code class="docutils literal notranslate"><span class="pre">dict</span></code> contractions were using
extra frames like Python3 does, but those are not needed.</p></li>
<li><p>Standalone: Fix, the way <code class="docutils literal notranslate"><span class="pre">PYTHONHOME</span></code> was set on Windows had no
effect, which allowed the compiled binary to access the original
installation still.</p></li>
<li><p>Standalone: Added some newly discovered missing hidden dependencies
of extension modules.</p></li>
<li><p>Compatibility: The name mangling of private names (e.g. <code class="docutils literal notranslate"><span class="pre">__var</span></code>) in
classes was applied to variable names, and function declarations, but
not to classes yet.</p></li>
<li><p>Python3.6: Fix, added support for list contractions with <code class="docutils literal notranslate"><span class="pre">await</span></code>
expressions in async generators.</p></li>
<li><p>Python3.6: Fix, <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code> was not working in async generators
yet.</p></li>
<li><p>Fix, for module tracebacks, we output the module name <code class="docutils literal notranslate"><span class="pre">&lt;module</span>
<span class="pre">name</span></code>&gt; instead of merely <code class="docutils literal notranslate"><span class="pre">&lt;module&gt;</span></code>, but if the module was in a
package, that was not indicated. Now it is <code class="docutils literal notranslate"><span class="pre">&lt;module</span> <span class="pre">package.name&gt;</span></code>.</p></li>
<li><p>Windows: The cache directory could be unicode which then failed to
pass as an argument to scons. We now encode such names as UTF-8 and
decode in Scons afterwards, solving the problem in a generic way.</p></li>
<li><p>Standalone: Need to recursively resolve shared libraries with
<code class="docutils literal notranslate"><span class="pre">ldd</span></code>, otherwise not all could be included.</p></li>
<li><p>Standalone: Make sure <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> has no references to CPython
compile time paths, or else things may work on the compiling machine,
but not on another.</p></li>
<li><p>Standalone: Added various missing dependencies.</p></li>
<li><p>Standalone: Wasn’t considering the DLLs directory for standard
library extensions for freezing, which would leave out these.</p></li>
<li><p>Compatibility: For <code class="docutils literal notranslate"><span class="pre">__future__</span></code> imports the <code class="docutils literal notranslate"><span class="pre">__import__</span></code> function
was called more than once.</p></li>
</ul>
</div>
<div class="section" id="optimization">
<h2>Optimization<a class="headerlink" href="#optimization" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Contractions are now all properly inlined and allow for optimization
as if they were fully local. This should give better code in some
cases.</p></li>
<li><p>Classes are now all building their locals dictionary inline to the
using scope, allowing for more compact code.</p></li>
<li><p>The dictionary API was not used in module template code, although it
helps to generate more compact code.</p></li>
</ul>
</div>
<div class="section" id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Experimental support for building platform dependent wheel
distribution.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python setup.py --command-packages<span class="o">=</span>nuitka.distutils clean -a bdist_nuitka
</pre></div>
</div>
<p>Use with caution, this is incomplete work.</p>
</li>
<li><p>Experimental support for running tests against compiled installation
with <code class="docutils literal notranslate"><span class="pre">nose</span></code> and <code class="docutils literal notranslate"><span class="pre">py.test</span></code>.</p></li>
<li><p>When specifying what to recurse to, now patterns can be used, e.g.
like this <code class="docutils literal notranslate"><span class="pre">--recurse-not-to=*.tests</span></code> which will skip all tests in
submodules from compilation.</p></li>
<li><p>By setting <code class="docutils literal notranslate"><span class="pre">NUITKA_PACKAGE_packagename=/some/path</span></code> the <code class="docutils literal notranslate"><span class="pre">__path__</span></code>
of packages can be extended automatically in order to allow and load
uncompiled sources from another location. This can be e.g. a
<code class="docutils literal notranslate"><span class="pre">tests</span></code> sub-package or other plugins.</p></li>
<li><p>By default when creating a module, now also a <code class="docutils literal notranslate"><span class="pre">module.pyi</span></code> file is
created that contains all imported modules. This should be deployed
alongside the extension module, so that standalone mode creation can
benefit from knowing the dependencies of compiled code.</p></li>
<li><p>Added option <code class="docutils literal notranslate"><span class="pre">--plugin-list</span></code> that was mentioned in the help output,
but still missing so far.</p></li>
<li><p>The import tracing of the <code class="docutils literal notranslate"><span class="pre">hints</span></code> module has achieved experimental
status and can be used to test compatibility with regards to import
behavior.</p></li>
</ul>
</div>
<div class="section" id="cleanups">
<h2>Cleanups<a class="headerlink" href="#cleanups" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Rename tree and codegen <code class="docutils literal notranslate"><span class="pre">Helper</span></code> modules to unique names, making
them easier to work with.</p></li>
<li><p>Share the code that decides to not warn for standard library paths
with more warnings.</p></li>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">bool</span></code> enum definition of Python2 which is more elegant
than ours.</p></li>
<li><p>Move quality tools, autoformat, isort, etc. to the
<code class="docutils literal notranslate"><span class="pre">nuitka.tools.quality</span></code> namespace.</p></li>
<li><p>Move output comparison tool to the <code class="docutils literal notranslate"><span class="pre">nuitka.tools.testing</span></code>
namespace.</p></li>
<li><p>Made frame code generation capable of using nested frames, allowing
the real inline of classes and contraction bodies, instead of
“direct” calls to pseudo functions being used.</p></li>
<li><p>Proper base classes for functions that are entry points, and
functions that are merely a local expression using return statements.</p></li>
</ul>
</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>The search mode with pattern, was not working anymore.</p></li>
<li><p>Resume hash values now consider the Python version too.</p></li>
<li><p>Added test that covers using test runners like <code class="docutils literal notranslate"><span class="pre">nose</span></code> and
<code class="docutils literal notranslate"><span class="pre">py.test</span></code> with Nuitka compiled extension modules.</p></li>
</ul>
</div>
<div class="section" id="organisational">
<h2>Organisational<a class="headerlink" href="#organisational" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Added support for Scons 3.0 and running Scons with Python3.5 or
higher. The option to specify the Python to use for scons has been
renamed to reflect that it may also be a Python3 now. Only for
Python3.2 to Python3.4 we now need another Python installation.</p></li>
<li><p>Made recursion the default for <code class="docutils literal notranslate"><span class="pre">--recurse-directory</span></code> with packages.
Before you also had to tell it to recurse into that package or else
it would only include the top level package, but nothing below.</p></li>
<li><p>Updated the man pages, correct mentions of its C++ to C and don’t use
now deprecated options.</p></li>
<li><p>Updated the help output which still said that standalone mode implies
recursion into standard library, which is no longer true and even not
recommended.</p></li>
<li><p>Added option to disable the output of <code class="docutils literal notranslate"><span class="pre">.pyi</span></code> file when creating an
extension module.</p></li>
<li><p>Removed Ubuntu Wily package download, no longer supported by Ubuntu.</p></li>
</ul>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline"></a></h2>
<p>This release was done to get the fixes and new features out for testing.
There is work started that should make generators use an explicit extra
stack via pointer, and restore instruction state via goto dispatchers at
function entry, but that is not complete.</p>
<p>This feature, dubbed “goto generators” will remove the need for fibers
(which is itself a lot of code), reduce the memory footprint at run time
for anything that uses a lot of generators, or coroutines.</p>
<p>Integrating with <code class="docutils literal notranslate"><span class="pre">distutils</span></code> is also a new thing, and once completed
will make use of Nuitka for existing projects automatic and trivial to
do. There is a lot missing for that goal, but we will get there.</p>
<p>Also, documenting how to run tests against compiled code, if that test
code lives inside of that package, will make a huge difference, as that
will make it easier for people to torture Nuitka with their own test
cases.</p>
<p>And then of course, nested frames now mean that every function could be
inlined, which was previously not possible due to collisions of frames.
This will pave the route for better optimization in those cases in
future releases.</p>
<p>The experimental features will require more work, but should make it
easier to use Nuitka for existing projects. Future releases will make
integrating Nuitka dead simple, or that is the hope.</p>
<p>And last but not least, now that Scons works with Python3, chances are
that Nuitka will more often work out the of the box. The older Python3
versions that still retain the issue are not very widespread.</p>
</div>
</div>

<div class="section">
    

<div class="section">
  <span style="float: left">
     Previous:
    
    <a href="nuitka-release-0527.html">
       Nuitka Release 0.5.27
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     Next: 
    <a href="nuitka-release-0529.html">
      Nuitka Release 0.5.29 
    </a>
    
  </span>
</div>
  
</div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kay Hayen and Nuitka Contributors.</p>
  </div>

  
<div class='share-button-container'>
    <div class="socialbutton-wrapper">
        <a href="https://twitter.com/share?url=https://nuitka.net/posts/nuitka-release-0528.html&hashtags=nuitka" target="_blank">
            <div class="socialbutton twitter" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-twitter.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="https://www.facebook.com/sharer.php?u=https://nuitka.net/posts/nuitka-release-0528.html&hashtag=%23nuitka"  target="_blank">
            <div class="socialbutton facebook" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-facebook.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="http://www.reddit.com/submit?url=https://nuitka.net/posts/nuitka-release-0528.html" target="_blank">
            <div class="socialbutton reddit">
                <p class="icon">
                    <img src="/_static/icon-reddit.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>
    </div>
</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>