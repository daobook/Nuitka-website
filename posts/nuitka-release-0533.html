<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nuitka Release 0.5.33</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/asciinema-player_2.6.1.css" type="text/css" />
      <link rel="stylesheet" href="../_static/asciinema-custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" type="text/css" />
    <link rel="canonical" href="https://nuitka.net/posts/nuitka-release-0533.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/tabs.js"></script>
        <script src="../_static/asciinema-player_2.6.1.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />   
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Nuitka Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Nuitka the Python Compiler
            <img src="../_static/Nuitka-Logo-Symbol.png" class="logo" alt="Logo"/>
          </a><!-- Empty override file take the place of searchbox.html, which generates search box. -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use.html">国际化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Commercial Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/commercial.html">Nuitka Commercial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html">Nuitka Release 0.6.19 (Draft)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-18">Nuitka Release 0.6.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-17">Nuitka Release 0.6.17</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#older-releases">Older Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/roadmap.html">Roadmap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/api-doc.html">API doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/factory.html">Factory Instructions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Media</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/Presentations.html">Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/Streaming.html">Streaming</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/impressum.html">Impressum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Under construction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/pyside2.html">Nuitka PySide2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/donations.html">Donations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/gsoc2019.html">Google Summer of Code 2019</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/nuitka-demo.html">Nuitka Demo</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nuitka the Python Compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <section id="nuitka-release-0-5-33">
<h1>Nuitka Release 0.5.33<a class="headerlink" href="#nuitka-release-0-5-33" title="Permalink to this headline"></a></h1>
<p>This is to inform you about the new stable release of <a class="reference external" href="https://nuitka.net">Nuitka</a>. It is the extremely compatible Python compiler,
<a class="reference external" href="/doc/download.html">“download now”</a>.</p>
<p>This release contains a bunch of fixes, most of which were previously
released as part of hotfixes, and important new optimization for
generators.</p>
<section id="bug-fixes">
<h2>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Fix, nested functions with local classes using outside function
closure variables were not registering their usage, which could lead
to errors at C compile time. Fixed in 0.5.32.1 already.</p></li>
<li><p>Fix, usage of built-in calls in a class level could crash the
compiler if a class variable was updated with its result. Fixed in
0.5.32.1 already.</p></li>
<li><p>Python 3.7: The handling of non-type bases classes was not fully
compatible and wrong usages were giving <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">TypeError</span></code>. Fixed in 0.5.32.2 already.</p></li>
<li><p>Python 3.5: Fix, <code class="docutils literal notranslate"><span class="pre">await</span></code> expressions didn’t annotate their
exception exit. Fixed in 0.5.32.2 already.</p></li>
<li><p>Python3: The <code class="docutils literal notranslate"><span class="pre">enum</span></code> module usages with <code class="docutils literal notranslate"><span class="pre">__new__</span></code> in derived
classes were not working, due to our automatic <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code>
decoration. Turns out, that was only needed for Python2 and can be
removed, making enum work all the way. Fixed in 0.5.32.3 already.</p></li>
<li><p>Fix, recursion into <code class="docutils literal notranslate"><span class="pre">__main__</span></code> was done and could lead to compiler
crashes if the main module was named like that. This is not
prevented. Fixed in 0.5.32.3 already.</p></li>
<li><p>Python3: The name for list contraction’s frames was wrong all along
and not just changed for 3.7, so drop that version check on it. Fixed
in 0.5.32.3 already.</p></li>
<li><p>Fix, the hashing of code objects has creating a key that could
produce more overlaps for the hash than necessary. Using a <code class="docutils literal notranslate"><span class="pre">C1</span></code> on
line 29 and <code class="docutils literal notranslate"><span class="pre">C</span></code> on line 129, was considered the same. And that is
what actually happened. Fixed in 0.5.32.3 already.</p></li>
<li><p>macOS: Various fixes for newer Xcode versions to work as well. Fixed
in 0.5.32.4 already.</p></li>
<li><p>Python3: Fix, the default <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> was the empty dict and
could be modified, leading to severe corruption potentially. Fixed in
0.5.32.4 already.</p></li>
<li><p>Python3: When an exception is thrown into a generator that currently
does a <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> is not to be normalized.</p></li>
<li><p>Python3: Some exception handling cases of <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> were leaking
references to objects. Fixed in 0.5.32.5 already.</p></li>
<li><p>Python3: Nested namespace packages were not working unless the
directory continued to exist on disk. Fixed in 0.5.32.5 already.</p></li>
<li><p>Standalone: Do not include <code class="docutils literal notranslate"><span class="pre">icuuc.dll</span></code> which is a system DLL. Fixed
in 0.5.32.5 already.</p></li>
<li><p>Standalone: Added hidden dependency of newer version of <code class="docutils literal notranslate"><span class="pre">sip</span></code>.
Fixed in 0.5.32.5 already.</p></li>
<li><p>Standalone: Do not copy file permissions of DLLs and extension
modules as that makes deleting and modifying them only harder. Fixed
in 0.5.32.6 already.</p></li>
<li><p>Windows: The multiprocessing plugin was not always properly patching
the run time for all module loads, made it more robust. Fixed in
0.5.32.6 already.</p></li>
<li><p>Standalone: Do not preserve permissions of copied DLLs, which can
cause issues with read-only files on Windows when later trying to
overwrite or remove files.</p></li>
<li><p>Python3.4: Make sure to disconnect finished generators from their
frames to avoid potential data corruption. Fixed in 0.5.32.6 already.</p></li>
<li><p>Python3.5: Make sure to disconnect finished coroutines from their
frames to avoid potential data corruption. Fixed in 0.5.32.6 already.</p></li>
<li><p>Python3.6: Make sure to disconnect finished asyncgen from their
frames to avoid potential data corruption. Fixed in 0.5.32.6 already.</p></li>
<li><p>Python3.5: Explicit frame closes of frames owned by coroutines could
corrupt data. Fixed in 0.5.32.7 already.</p></li>
<li><p>Python3.6: Explicit frame closes of frames owned by asyncgen could
corrupt data. Fixed in 0.5.32.7 already.</p></li>
<li><p>Python 3.4: Fix threaded imports by properly handling
<code class="docutils literal notranslate"><span class="pre">_initializing</span></code> in compiled modules <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> attributes. Before
it happen that another thread attempts to use an unfinished module.
Fixed in 0.5.32.8 already.</p></li>
<li><p>Fix, the options <code class="docutils literal notranslate"><span class="pre">--include-module</span></code> and <code class="docutils literal notranslate"><span class="pre">--include-package</span></code> were
present but not visible in the help output. Fixed in 0.5.32.8
already.</p></li>
<li><p>Windows: The multiprocessing plugin failed to properly pass compiled
functions. Fixed in 0.5.32.8 already.</p></li>
<li><p>Python3: Fix, optimization for in-place operations on mapping values
are not allowed and had to be disabled. Fixed in 0.5.32.8 already.</p></li>
<li><p>Python 3.5: Fixed exception handling with coroutines and asyncgen
<code class="docutils literal notranslate"><span class="pre">throw</span></code> to not corrupt exception objects.</p></li>
<li><p>Python 3.7: Added more checks to class creations that were missing
for full compatibility.</p></li>
<li><p>Python3: Smarter hashing of unicode values avoids increased memory
usage from cached converted forms in debug mode.</p></li>
</ul>
</section>
<section id="organisational">
<h2>Organisational<a class="headerlink" href="#organisational" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>The issue tracker on Github is now the one that should be used with
Nuitka, winning due to easier issue templating and integration with
pull requests.</p></li>
<li><p>Document the threading model and exception model to use for MinGW64.</p></li>
<li><p>Removed the <code class="docutils literal notranslate"><span class="pre">enum</span></code> plug-in which is no longer useful after the
improvements to the <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code> handling for Python3.</p></li>
<li><p>Added Python 3.7 testing for Travis.</p></li>
<li><p>Make it clear in the documentation that <code class="docutils literal notranslate"><span class="pre">pyenv</span></code> is not supported.</p></li>
<li><p>The version output includes more information now, OS and
architecture, so issue reports should contain that now.</p></li>
<li><p>On PyPI we didn’t yet indicated Python 3.7 as supported, which it of
course is.</p></li>
</ul>
</section>
<section id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Added support for MiniConda Python.</p></li>
</ul>
</section>
<section id="optimization">
<h2>Optimization<a class="headerlink" href="#optimization" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Using goto based generators that return from execution and resume
based on heap storage. This makes tests using generators twice as
fast and they no longer use a full C stack of 2MB, but only 1K
instead.</p></li>
<li><p>Conditional <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">if</span> <span class="pre">cond</span> <span class="pre">else</span> <span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">and</span> <span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">or</span> <span class="pre">b</span></code> expressions
of which the result value is are now transformed into conditional
statements allowing to apply further optimizations to the right and
left side expressions as well.</p></li>
<li><p>Replace unused function creations with side effects from their
default values with just those, removing more unused code.</p></li>
<li><p>Put all statement related code and declarations for it in a dedicated
C block, making things slightly more easy for the C compiler to
re-use the stack space.</p></li>
<li><p>Avoid linking against <code class="docutils literal notranslate"><span class="pre">libpython</span></code> in module mode on everything but
Windows where it is really needed. No longer check for static Python,
not needed anymore.</p></li>
<li><p>More compact function, generator, and asyncgen creation code for the
normal cases, avoid qualname if identical to name for all of them.</p></li>
<li><p>Python2 class dictionaries are now indeed directly optimized, giving
more compact code.</p></li>
<li><p>Module exception exits and thus its frames have become optional
allowing to avoid some code for some special modules.</p></li>
<li><p>Uncompiled generator integration was backported to 3.4 as well,
improving compatibility and speed there as well.</p></li>
</ul>
</section>
<section id="cleanups">
<h2>Cleanups<a class="headerlink" href="#cleanups" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Frame object and their cache declarations are now handled by the way
of allocated variable descriptions, avoid special handling for them.</p></li>
<li><p>The interface to “forget” a temporary variable has been replaced with
a new method that skips a number for it. This is done to keep
expression use the same indexes for all their child expressions, but
this is more explicit.</p></li>
<li><p>Instead of passing around C variables names for temporary values, we
now have full descriptions, with C type, code name, storage location,
and the init value to use. This makes the information more
immediately available where it is needed.</p></li>
<li><p>Variable declarations are now created when needed and stored in
dedicated variable storage objects, which then in can generate the
code as necessary.</p></li>
<li><p>Module code generation has been enhanced to be closer to the pattern
used by functions, generators, etc.</p></li>
<li><p>There is now only one spot that creates variable declaration, instead
of previous code duplications.</p></li>
<li><p>Code objects are now attached to functions, generators, coroutines,
and asyncgen bodies, and not anymore to the creation of these
objects. This allows for simpler code generation.</p></li>
<li><p>Removed fiber implementations, no more needed.</p></li>
</ul>
</section>
<section id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Finally the asyncgen tests can be enabled in the CPython 3.6 test
suite as the corrupting crash has been identified.</p></li>
<li><p>Cover ever more cases of spurious permission problems on Windows.</p></li>
<li><p>Added the ability to specify specific modules a comparison test
should recurse to, making some CPython tests follow into modules
where actual test code lives.</p></li>
</ul>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline"></a></h2>
<p>This release is huge in many ways.</p>
<p>First, finishing “goto generators” clears an old scalability problem of
Nuitka that needed to be addressed. No more do
generators/coroutines/asyncgen consume too much memory, but instead they
become as lightweight as they ought to be.</p>
<p>Second, the use of variable declarations carying type information all
through the code generation, is an important pre-condition for “C types”
work to resume and become possible, what will be 0.6.0 and the next
release.</p>
<p>Third, the improved generator performance will be removing a lot of
cases, where Nuitka wasn’t as fast, as its current state not using “C
types” yet, should allow. It is now consistently faster than CPython for
everything related to generators.</p>
<p>Fourth, the fibers were a burden for the debugging and linking of Nuitka
on various platforms, as they provided deprecated interfaces or not. As
they are now gone, Nuitka ought to definitely work on any platform where
Python works.</p>
<p>From here on, C types work can take it, and produce the results we are
waiting for in the next major release cycle that is about to start.</p>
<p>Also the amount of fixes for this release has been incredibly high. Lots
of old bugs esp. for coroutines and asyncgen have been fixed, this is
not only faster, but way more correct. Mainly due to the easier
debugging and interface to the context code, bugs were far easier to
avoid and/or find.</p>
</section>
</section>

<div class="section">
    

<div class="section">
  <span style="float: left">
     Previous:
    
    <a href="nuitka-this-week-6.html">
       Nuitka this week #6
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     Next: 
    <a href="nuitka-this-week-7.html">
      Nuitka this week #7 
    </a>
    
  </span>
</div>
  
</div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kay Hayen and Nuitka Contributors.</p>
  </div>

  
<div class='share-button-container'>
    <div class="socialbutton-wrapper">
        <a href="https://twitter.com/share?url=https://nuitka.net/posts/nuitka-release-0533.html&hashtags=nuitka" target="_blank">
            <div class="socialbutton twitter" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-twitter.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="https://www.facebook.com/sharer.php?u=https://nuitka.net/posts/nuitka-release-0533.html&hashtag=%23nuitka"  target="_blank">
            <div class="socialbutton facebook" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-facebook.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="http://www.reddit.com/submit?url=https://nuitka.net/posts/nuitka-release-0533.html" target="_blank">
            <div class="socialbutton reddit">
                <p class="icon">
                    <img src="/_static/icon-reddit.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
      $('a[href^="http://"], a[href^="https://"]').not('a[class*=internal]').attr('target', '_blank');
    });
  </script>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-V73VK1T804"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-V73VK1T804', {
          'anonymize_ip': true,
      });
    </script> 

</body>
</html>