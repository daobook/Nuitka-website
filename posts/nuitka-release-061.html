<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nuitka Release 0.6.1</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/asciinema-player_2.6.1.css" type="text/css" />
      <link rel="stylesheet" href="../_static/asciinema-custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" type="text/css" />
    <link rel="canonical" href="https://nuitka.net/posts/nuitka-release-061.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/tabs.js"></script>
        <script src="../_static/asciinema-player_2.6.1.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />   
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Nuitka Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Nuitka the Python Compiler
            <img src="../_static/Nuitka-Logo-Symbol.png" class="logo" alt="Logo"/>
          </a><!-- Empty override file take the place of searchbox.html, which generates search box. -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Commercial Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/commercial.html">Nuitka Commercial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html">Nuitka Release 0.6.19 (Draft)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-18">Nuitka Release 0.6.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-17">Nuitka Release 0.6.17</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#older-releases">Older Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/roadmap.html">Roadmap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/api-doc.html">API doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/factory.html">Factory Instructions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Media</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/Presentations.html">Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/Streaming.html">Streaming</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/impressum.html">Impressum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Under construction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/pyside2.html">Nuitka PySide2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/donations.html">Donations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/gsoc2019.html">Google Summer of Code 2019</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/nuitka-demo.html">Nuitka Demo</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nuitka the Python Compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <section id="nuitka-release-0-6-1">
<h1>Nuitka Release 0.6.1<a class="headerlink" href="#nuitka-release-0-6-1" title="Permalink to this headline"></a></h1>
<p>This is to inform you about the new stable release of <a class="reference external" href="https://nuitka.net">Nuitka</a>. It is the extremely compatible Python compiler,
<a class="reference external" href="/doc/download.html">“download now”</a>.</p>
<p>This release comes after a relatively long time, and contains important
new optimization work, and even more bug fixes.</p>
<section id="bug-fixes">
<h2>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Fix, the options <code class="docutils literal notranslate"><span class="pre">--[no]follow-import-to=package_name</span></code> was supposed
to not follow into the given package, but the check was executed too
broadly, so that e.g. <code class="docutils literal notranslate"><span class="pre">package_name2</span></code> was also affected. Fixed in
0.6.0.1 already.</p></li>
<li><p>Fix, wasn’t detecting multiple recursions into the same package in
module mode, when attempting to compile a whole sub-package. Fixed in
0.6.0.1 already.</p></li>
<li><p>Fix, constant values are used as C boolean values still for some of
the cases. Fixed in 0.6.0.1 already.</p></li>
<li><p>Fix, referencing a function cannot raise an exception, but that was
not annotated. Fixed in 0.6.0.2 already.</p></li>
<li><p>macOS: Use standard include of C bool type instead of rolling our
own, which was not compatible with newest Clang. Fixed in 0.6.0.3
already.</p></li>
<li><p>Python3: Fix, the <code class="docutils literal notranslate"><span class="pre">bytes</span></code> built-in type actually does have a
<code class="docutils literal notranslate"><span class="pre">__float__</span></code> slot. Fixed in 0.6.0.4 already.</p></li>
<li><p>Python3.7: Types that are also sequences still need to call the
method <code class="docutils literal notranslate"><span class="pre">__class_getitem__</span></code> for consideration. Fixed in 0.6.0.4
already.</p></li>
<li><p>Python3.7: Error exits from program exit could get lost on Windows
due to <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> handling not preserving errors. Fixed in 0.6.0.4
already.</p></li>
<li><p>Windows: Negative exit codes from Nuitka, e.g. due to a triggered
assertion in debug mode were not working. Fixed in 0.6.0.4 already.</p></li>
<li><p>Fix, conditional <code class="docutils literal notranslate"><span class="pre">and</span></code> expressions were mis-optimized when not used
to not execute the right hand side still. Fixed in 0.6.0.4 already.</p></li>
<li><p>Python3.6: Fix, generators, coroutines, and asyncgen were not
properly supporting annotations for local variables. Fixed in 0.6.0.5
already.</p></li>
<li><p>Python3.7: Fix, class declarations had memory leaks that were
untestable before 3.7.1 fixed reference count issues in CPython.
Fixed in 0.6.0.6 already.</p></li>
<li><p>Python3.7: Fix, asyncgen expressions can be created in normal
functions without an immediate awaiting of the iterator. This new
feature was not correctly supported.</p></li>
<li><p>Fix, star imports on the module level should disable built-in name
optimization except for the most critical ones, otherwise e.g. names
like <code class="docutils literal notranslate"><span class="pre">all</span></code> or <code class="docutils literal notranslate"><span class="pre">pow</span></code> can become wrong. Previous workarounds for
<code class="docutils literal notranslate"><span class="pre">pow</span></code> were not good enough.</p></li>
<li><p>Fix, the scons for Python3 failed to properly report build errors due
to a regression of the Scons version used for it. This would mask
build errors on Windows.</p></li>
<li><p>Python3.4: Fix, packages didn’t indicate that they are packages in
their <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> value, causing issues with <code class="docutils literal notranslate"><span class="pre">importlib_resources</span></code>
module.</p></li>
<li><p>Python3.4: The <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> values of compiled modules didn’t have
compatible <code class="docutils literal notranslate"><span class="pre">origin</span></code> and <code class="docutils literal notranslate"><span class="pre">has_location</span></code> values preventing
<code class="docutils literal notranslate"><span class="pre">importlib_resources</span></code> module from working to load data files.</p></li>
<li><p>Fix, packages created from <code class="docutils literal notranslate"><span class="pre">.pth</span></code> files were also considered when
checking for sub-packages of a module.</p></li>
<li><p>Standalone: Handle cases of conflicting DLLs better. On Windows pick
the newest file version if different, and otherwise just report and
pick randomly because we cannot really decide which ought to be
loaded.</p></li>
<li><p>Standalone: Warn about collisions of DLLs on non-Windows only as this
can happen with wheels apparently.</p></li>
<li><p>Standalone: For Windows Python extension modules <code class="docutils literal notranslate"><span class="pre">.pyd</span></code> files,
remove the SxS configuration for cases where it causes problems, not
needed.</p></li>
<li><p>Fix: The <code class="docutils literal notranslate"><span class="pre">exec</span></code> statement on file handles was not using the proper
filename when compiling, therefore breaking e.g.
<code class="docutils literal notranslate"><span class="pre">inspect.getsource</span></code> on functions defined there.</p></li>
<li><p>Standalone: Added support for OpenGL platform plugins to be included
automatically.</p></li>
<li><p>Standalone: Added missing implicit dependency for <code class="docutils literal notranslate"><span class="pre">zmq</span></code> module.</p></li>
<li><p>Python3.7: Fix, using the <code class="docutils literal notranslate"><span class="pre">-X</span> <span class="pre">utf8</span></code> flag on the calling
interpreter, aka <code class="docutils literal notranslate"><span class="pre">--python-flag=utf8_mode</span></code> was not preserved in the
compiled binary in all cases.</p></li>
</ul>
</section>
<section id="optimization">
<h2>Optimization<a class="headerlink" href="#optimization" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Enabled C target type <code class="docutils literal notranslate"><span class="pre">void</span></code> which will catch creating unused stuff
more immediately and give better code for expression only statements.</p></li>
<li><p>Enabled in-place optimization for module variables, avoiding write
back to the module dict for unchanged values, accelerating these
operations.</p></li>
<li><p>Compile time memory savings for the <code class="docutils literal notranslate"><span class="pre">yield</span></code> node of Python2, no
need to track if it is in an exception handler, not relevant there.</p></li>
<li><p>Using the single child node for the <code class="docutils literal notranslate"><span class="pre">yield</span></code> nodes gives memory
savings at compile time for these, while also making them operate
faster.</p></li>
<li><p>More kinds of in-place operations are now optimized, e.g. <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">+=</span>
<span class="pre">int</span></code> and the <code class="docutils literal notranslate"><span class="pre">bytes</span></code> ones were specialized to perform real
in-place extension where possible.</p></li>
<li><p>Loop variables no longer loose type information, but instead collect
the set of possible type shapes allowing optimization for them.</p></li>
</ul>
</section>
<section id="organisational">
<h2>Organisational<a class="headerlink" href="#organisational" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Corrected download link for Arch AUR link of develop package.</p></li>
<li><p>Added repository for Ubuntu Cosmic (18.10) for download.</p></li>
<li><p>Added repository for Fedora 29 for download.</p></li>
<li><p>Describe the exact format used for <code class="docutils literal notranslate"><span class="pre">clang-format</span></code> in the Developer
Manual.</p></li>
<li><p>Added description how to use CondaCC on Windows to the User Manual.</p></li>
</ul>
</section>
<section id="cleanups">
<h2>Cleanups<a class="headerlink" href="#cleanups" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>The operations used for <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code>, <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code>, and <code class="docutils literal notranslate"><span class="pre">await</span></code>
were all doing a look-up of an awaitable, and then executing the
<code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> that awaitable as one thing. Now this is split into
two parts, with a new <code class="docutils literal notranslate"><span class="pre">ExpressionYieldFromAwaitable</span></code> as a dedicated
node.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">yield</span></code> node types, now 3 share a base class and common
computation for now, enhancing the one for awaitiable, which was not
fully annotating everything that can happen.</p></li>
<li><p>In code generation avoid statement blocks that are not needed,
because there are no local C variables declared, and properly indent
them.</p></li>
</ul>
</section>
<section id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Fixups for the manual Valgrind runner and the UI changes.</p></li>
<li><p>Test runner detects lock issue of <code class="docutils literal notranslate"><span class="pre">clcache</span></code> on Windows and
considers it a permission problem that causes a retry.</p></li>
</ul>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline"></a></h2>
<p>This addresses even more corner cases not working correctly, the out of
the box experience should be even better now.</p>
<p>The push towards C level performance for integer operation was held up
by the realization that loop SSA was not yet there really, and that it
had to be implemented, which of course now makes a huge difference for
the cases where e.g. <code class="docutils literal notranslate"><span class="pre">bool</span></code> are being used. There is no C type for
<code class="docutils literal notranslate"><span class="pre">int</span></code> used yet, which limits the impact of optimization to only taking
shortcuts for the supported types. These are useful and faster of
course, but only building blocks for what is to come.</p>
<p>Most of the effort went into specialized helpers that e.g. add a
<code class="docutils literal notranslate"><span class="pre">float</span></code> and and <code class="docutils literal notranslate"><span class="pre">int</span></code> value in a dedicated fashion, as well as
comparison operations, so we can fully operate some minimal examples
with specialized code. This is too limited still, and must be applied to
ever more operations.</p>
<p>What’s more is that the benchmarking situation has not improved. Work
will be needed in this domain to make improvements more demonstrable. It
may well end up being the focus for the next release to improve Nuitka
speedcenter to give more fine grained insights across minor changes of
Nuitka and graphs with more history.</p>
</section>
</section>

<div class="section">
    

<div class="section">
  <span style="float: left">
     Previous:
    
    <a href="nuitka-this-week-11.html">
       Nuitka this week #11
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     Next: 
    <a href="nuitka-this-week-12.html">
      Nuitka this week #12 
    </a>
    
  </span>
</div>
  
</div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kay Hayen and Nuitka Contributors.</p>
  </div>

  
<div class='share-button-container'>
    <div class="socialbutton-wrapper">
        <a href="https://twitter.com/share?url=https://nuitka.net/posts/nuitka-release-061.html&hashtags=nuitka" target="_blank">
            <div class="socialbutton twitter" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-twitter.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="https://www.facebook.com/sharer.php?u=https://nuitka.net/posts/nuitka-release-061.html&hashtag=%23nuitka"  target="_blank">
            <div class="socialbutton facebook" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-facebook.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="http://www.reddit.com/submit?url=https://nuitka.net/posts/nuitka-release-061.html" target="_blank">
            <div class="socialbutton reddit">
                <p class="icon">
                    <img src="/_static/icon-reddit.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
      $('a[href^="http://"], a[href^="https://"]').not('a[class*=internal]').attr('target', '_blank');
    });
  </script>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-V73VK1T804"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-V73VK1T804', {
          'anonymize_ip': true,
      });
    </script> 

</body>
</html>