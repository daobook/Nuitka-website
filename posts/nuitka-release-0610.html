
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

    <title>Nuitka Release 0.6.10</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/asciinema-player_2.6.1.css" />
    <link rel="stylesheet" type="text/css" href="../_static/asciinema-custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/my_theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    <script src="../_static/asciinema-player_2.6.1.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <link rel="canonical" href="https://daobook.github.io/nuitka-doc/posts/nuitka-release-0610.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
     
<link
  rel="alternate"
  type="application/atom+xml"
  href="../posts/atom.xml"
  title="Nuitka Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
          
<h2>
   
  22 December 2020 
</h2>

<ul>
   
<li id="author">
  <span
    >作者:</span
  >
   
  <a href="author/kay-hayen.html">Kay Hayen</a>  
</li>
    
<li id="tags">
  <span
    >标签: </span
  >
   
  <a href="tag/compiler.html">compiler</a>   
  <a href="tag/python.html">Python</a>   
  <a href="tag/nuitka.html">Nuitka</a>  
</li>
 
</ul>

<h3>
  <a href="../posts.html">最近帖子</a>
</h3>
<ul>
   
  <li>
    <a href="nuitka-release-0618.html"
      >11 December - Nuitka Release 0.6.18</a
    >
  </li>
  
  <li>
    <a href="nuitka-release-0617.html"
      >11 November - Nuitka Release 0.6.17</a
    >
  </li>
  
  <li>
    <a href="nuitka-release-0616.html"
      >09 September - Nuitka Release 0.6.16</a
    >
  </li>
  
  <li>
    <a href="nuitka-release-0615.html"
      >05 June - Nuitka Release 0.6.15</a
    >
  </li>
  
  <li>
    <a href="nuitka-release-0614.html"
      >01 May - Nuitka Release 0.6.14</a
    >
  </li>
  
</ul>

<h3><a href="tag.html">标签</a></h3>
<style type="text/css">
  ul.ablog-cloud {
    list-style: none;
    overflow: auto;
  }
  ul.ablog-cloud li {
    float: left;
    height: 20pt;
    line-height: 18pt;
    margin-right: 5px;
  }
  ul.ablog-cloud a {
    text-decoration: none;
    vertical-align: middle;
  }
  li.ablog-cloud-1 {
    font-size: 80%;
  }
  li.ablog-cloud-2 {
    font-size: 95%;
  }
  li.ablog-cloud-3 {
    font-size: 110%;
  }
  li.ablog-cloud-4 {
    font-size: 125%;
  }
  li.ablog-cloud-5 {
    font-size: 140%;
  }
</style>
<ul class="ablog-cloud">
   
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/android.html">Android</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/debian.html">Debian</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/ntw.html">NTW</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/nikola.html">Nikola</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-5">
    <a href="tag/nuitka.html">Nuitka</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-5">
    <a href="tag/python.html">Python</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/windows.html">Windows</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/automation.html">automation</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/benchmark.html">benchmark</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-4">
    <a href="tag/compiler.html">compiler</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/conference.html">conference</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/europython.html">europython</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/family.html">family</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/git.html">git</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/gsoc2019.html">gsoc2019</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/physics.html">physics</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/portrait.html">portrait</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/presentation.html">presentation</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/pypi.html">pypi</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/pytest.html">pytest</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/quiz.html">quiz</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/standalone.html">standalone</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/tests.html">tests</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/video.html">video</a>
  </li>
   
</ul>

<h3>
  <a href="archive.html">归档</a>
</h3>
<ul>
   
  <li>
    <a href="2021.html">2021 (8)</a>
  </li>
    
  <li>
    <a href="2020.html">2020 (5)</a>
  </li>
    
  <li>
    <a href="2019.html">2019 (14)</a>
  </li>
    
  <li>
    <a href="2018.html">2018 (17)</a>
  </li>
    
  <li>
    <a href="2017.html">2017 (4)</a>
  </li>
    
  <li>
    <a href="2016.html">2016 (8)</a>
  </li>
    
  <li>
    <a href="2015.html">2015 (16)</a>
  </li>
    
  <li>
    <a href="2014.html">2014 (12)</a>
  </li>
    
  <li>
    <a href="2013.html">2013 (24)</a>
  </li>
    
  <li>
    <a href="2012.html">2012 (21)</a>
  </li>
    
  <li>
    <a href="2011.html">2011 (25)</a>
  </li>
    
  <li>
    <a href="2010.html">2010 (19)</a>
  </li>
   
</ul>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.rst</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bug-fixes">
   Bug Fixes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#new-features">
   New Features
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optimization">
   Optimization
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tests">
   Tests
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cleanups">
   Cleanups
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#organisational">
   Organisational
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   Summary
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Nuitka Release 0.6.10</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bug-fixes">
   Bug Fixes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#new-features">
   New Features
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optimization">
   Optimization
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tests">
   Tests
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cleanups">
   Cleanups
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#organisational">
   Organisational
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   Summary
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                 <div class="section" id="nuitka-release-0-6-10">
<h1>Nuitka Release 0.6.10<a class="headerlink" href="#nuitka-release-0-6-10" title="Permalink to this headline">¶</a></h1>
<p>This is to inform you about the new stable release of <a class="reference external" href="https://nuitka.net">Nuitka</a>. It is the extremely compatible Python compiler,
<a class="reference external" href="/doc/download.html">“download now”</a>.</p>
<p>This release comes with many new features, e.g. onefile support, as well
as many new optimization and bug fixes.</p>
<div class="section" id="bug-fixes">
<h2>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fix, was memory leaking arguments of all complex call helper
functions. Fixed in 0.6.9.6 already.</p></li>
<li><p>Plugins: Fix, the dill-compat code needs to follow API change. Fixed
in 0.6.9.7 already.</p></li>
<li><p>Windows: Fixup for multiprocessing module and complex call helpers
that could crash the program. Fixed in 0.6.9.7 already.</p></li>
<li><p>Fix, the frame caching could leak memory when using caching for
functions and generators used in multiple threads.</p></li>
<li><p>Python3: Fix, importing an extension module below a compiled module
was not possible in accelerated mode.</p></li>
<li><p>Python3: Fix, keyword arguments for <code class="docutils literal notranslate"><span class="pre">open</span></code> built-in were not fully
compatible.</p></li>
<li><p>Fix, the scons python check should also not accept directories,
otherwise strange misleading error will occur later.</p></li>
<li><p>Windows: When Python is installed through a symbolic link, MinGW64
and Scons were having issues, added a workaround to resolve it even
on Python2.</p></li>
<li><p>Compatibility: Added support for <code class="docutils literal notranslate"><span class="pre">co_freevars</span></code> in code objects,
e.g. newer matplotlib needs this.</p></li>
<li><p>Standalone: Add needed data files for gooey. Fixed in 0.6.9.4
already.</p></li>
<li><p>Scons: Fix, was not respecting <code class="docutils literal notranslate"><span class="pre">--quiet</span></code> option when running Scons.
Fixed in 0.6.9.3 already.</p></li>
<li><p>Scons: Fix, wasn’t automatically detecting Scons from promised paths.
Fixed in 0.6.9.2 already.</p></li>
<li><p>Scons: Fix, the clcache output parsing wasn’t robust enough. Fixed in
0.6.9.1 already.</p></li>
<li><p>Python3.8: Ignore all non-strings provided in doc-string fashion,
they are not to be considered.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">getattr</span></code>, <code class="docutils literal notranslate"><span class="pre">setattr</span></code> and <code class="docutils literal notranslate"><span class="pre">hasattr</span></code> could not be used in
finally clauses anymore. Fixed in 0.6.9.1 already.</p></li>
<li><p>Windows: For Python3 enhanced compatibility for Windows no console
mode, they need a <code class="docutils literal notranslate"><span class="pre">sys.stdin</span></code> or else e.g. <code class="docutils literal notranslate"><span class="pre">input</span></code> will not be
compatible and raise <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code>.</p></li>
</ul>
</div>
<div class="section" id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Added experimental support for Python 3.9, in such a way that the
CPython3.8 test suite passes now, the 3.9 suite needs investigation
still, so we might be missing new features.</p></li>
<li><p>Added experimental support for Onefile mode with <code class="docutils literal notranslate"><span class="pre">--onefile</span></code> that
uses <code class="docutils literal notranslate"><span class="pre">AppImage</span></code> on Linux and our own bootstrap binary on Windows.
Other platforms are not supported at this time. With this, the
standalone folder is packed into a single binary. The Windows variant
currently doesn’t yet do any compression yet, but the Linux one does.</p></li>
<li><p>Windows: Added downloading of <code class="docutils literal notranslate"><span class="pre">ccache.exe</span></code>, esp. as the other
sources so far recommended were not working properly after updates.
This is taken from the official project and should be good.</p></li>
<li><p>Windows: Added downloading of matching MinGW64 C compiler, if no
other was found, or that was has the wrong architecture, e.g. 32 bits
where we need 64 bits.</p></li>
<li><p>Windows: Added ability to copy icon resources from an existing binary
with new option <code class="docutils literal notranslate"><span class="pre">--windows-icon-from-exe</span></code>.</p></li>
<li><p>Windows: Added ability to provide multiple icon files for use with
different desktop resolutions with new option
<code class="docutils literal notranslate"><span class="pre">--windows-icon-from-ico</span></code> that got renamed to disambiguate from
other icon options.</p></li>
<li><p>Windows: Added support for requesting UAC admin right with new option
<code class="docutils literal notranslate"><span class="pre">--windows-uac-admin</span></code>.</p></li>
<li><p>Windows: Added support for requesting “uiaccess” rights with yet
another new option <code class="docutils literal notranslate"><span class="pre">--windows-uac-uiaccess</span></code>.</p></li>
<li><p>Windows: Added ability to specify version info to the binary. New
options <code class="docutils literal notranslate"><span class="pre">--windows-company-name</span></code>, <code class="docutils literal notranslate"><span class="pre">--windows-product-name</span></code>,
<code class="docutils literal notranslate"><span class="pre">--windows-file-version</span></code>, <code class="docutils literal notranslate"><span class="pre">--windows-product-version</span></code>, and
<code class="docutils literal notranslate"><span class="pre">--windows-file-description</span></code> have been added. Some of these have
defaults.</p></li>
<li><p>Enhanced support for using the Win32 compiler of MinGW64, but it’s
not perfect yet and not recommended.</p></li>
<li><p>Windows: Added support for LTO mode for MSVC as well, this seems to
allow more optimization.</p></li>
<li><p>Plugins: The numpy plugin now handles matplotlib3 config files
correctly.</p></li>
</ul>
</div>
<div class="section" id="optimization">
<h2>Optimization<a class="headerlink" href="#optimization" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Use less C variables in dictionary created, not one per key/value
pair. This improved scalability of C compilation.</p></li>
<li><p>Use common code for module variable access, leading to more compact
code and enhanced scalability of C compilation.</p></li>
<li><p>Use error exit during dictionary creation to release the dictionary,
list, tuple, and set in case of an error occurring while they are
still under construction. That avoids releases of it in error exists,
reducing the generated code size by a lot. This improves scalability
of C compilation for generating these.</p></li>
<li><p>Annotate no exception raise for local variables of classes with know
dict shape, to avoid useless error exits.</p></li>
<li><p>Annotate no exception exit for <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code> and <code class="docutils literal notranslate"><span class="pre">classmethod</span></code>
as they do not check their arguments at all. This makes code
generated for classes with these methods much more compact, mainly
improving their scalability in C compilation.</p></li>
<li><p>In code generation, prefer <code class="docutils literal notranslate"><span class="pre">bool</span></code> over <code class="docutils literal notranslate"><span class="pre">nuitka_bool</span></code> which allows
to annotate exception result, leading to more compact code. Also
cleanup so that code generation always go through the C type objects,
rather than doing cases locally, adding a C type for <code class="docutils literal notranslate"><span class="pre">bool</span></code>.</p></li>
<li><p>Use common code for C code handling const <code class="docutils literal notranslate"><span class="pre">None</span></code> return only, to
cases where there is any immutable constant value returned, avoid
code generation for this common case. Currently mutable constants are
not handled, this may be added in the future.</p></li>
<li><p>Annotate no exception for exception type checks in handlers for
Python2 and no exception if the value has exception type shape for
Python3. The exception type shape was newly added. This avoids
useless exception handlers in most cases, where the provided
exception is just a built-in exception name.</p></li>
<li><p>Improve speed of often used compile time methods on nodes
representing constant values, by making their implementation type
specific to improve frontend compile time speed, we check e.g.
mutable and hashable a lot.</p></li>
<li><p>Provide truth value for variable references, enhancing loop
optimization and merge value tracing, to also decide this correctly
for values only read, and then changed through attribute, e.g.
<code class="docutils literal notranslate"><span class="pre">append</span></code> on lists. This allows many more static optimization.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code> for methods in Nuitka nodes to achieve faster
frontend compile times where possible.</p></li>
<li><p>Use dedicated helper code for calls with single argument, avoiding
the need have a call site local C array of size one, just to pass a
pointer to it.</p></li>
<li><p>Added handling of <code class="docutils literal notranslate"><span class="pre">hash</span></code> slot, to predict hashable keys for
dictionary and sets.</p></li>
<li><p>Share more slot provision for built-in type shapes from mixin
classes, to get them more universally provided, even for special
types, where their consideration is unusual.</p></li>
<li><p>Trace “user provided” flag only for constants where it really
matters, i.e. for containers and generally potentially large values,
but not for every number or boolean value.</p></li>
<li><p>Added lowering of <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> constant values to <code class="docutils literal notranslate"><span class="pre">bytes</span></code> value
iteration, while handling constant values for this optimization with
dedicated code for improved frontend compilation speed.</p></li>
<li><p>The dict built-in now annotates the dictionary type shape of its
result.</p></li>
<li><p>The wrapping side-effects node now passes on the type shape of the
wrapped value, allowing for optimization of these too.</p></li>
<li><p>Split <code class="docutils literal notranslate"><span class="pre">slice</span></code> nodes into variants with 1, 2 or 3 arguments, to
avoid the overhead of determining which case we have, as well as to
save a bit of memory, since these are more frequently used on Python3
for subscript operations. Also annotate their type shape, allowing
more optimization.</p></li>
<li><p>Faster dictionary lookups, esp. in cases where errors occur, because
we were manually recreating a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> that is already provided
by the dict implementation. This should also be faster, as it avoids
a CPython API call overhead on the DLL and they can provide a
reference or not for the returned value, simplifying using code.</p></li>
<li><p>Faster dictionary containment checks, with our own dedicated helper,
we can use code that won’t create an exception when an item is not
present at all.</p></li>
<li><p>Faster hash lookups with our own helper, separating cases where we
want an exception for non-hashable values or not. These should also
be faster to call.</p></li>
<li><p>Avoid acquiring thread state in exception handling that checks if a
<code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> occurred, to improved speed on Python3, where is
involves locking, but this needs to be applied way more often.</p></li>
<li><p>Make sure checks to debug mode and full compatibility mode are done
with the variables introduced, to avoid losing performance due to
calls for Nuitka compile time enhancements. This was so far only done
partially.</p></li>
<li><p>Split constant references into two base classes, only one of them
tracking if the value was provided by the user. This saves compile
time memory and avoids the overhead to check if sizes are exceeded in
cases they cannot possibly be so.</p></li>
<li><p>The truth value of container creations is now statically known,
because the empty container creation is no longer a possibility for
these nodes, allowing more optimization for them.</p></li>
<li><p>Optimize the bool built-in with no arguments directory, allow to
simplify the node for single argument form to avoid checks if an
argument was given.</p></li>
<li><p>Added iteration handles for <code class="docutils literal notranslate"><span class="pre">xrange</span></code> values, and make them faster
to create by being tied to the node type, avoiding shared types,
instead using the mixin approach. This is in preparation to using
them for standard iterator tracing as well. So far they are only used
for <code class="docutils literal notranslate"><span class="pre">any</span></code> and <code class="docutils literal notranslate"><span class="pre">all</span></code> decision.</p></li>
<li><p>Added detection if a iterator next can raise, using existing iterator
checking which allows to remove needless checks and exception traces.
Adding a code variant for calls to next that cannot fail, while
tuning the code used for <code class="docutils literal notranslate"><span class="pre">next</span></code> and unpacking next, to use faster
exception checking in the C code. This will speed up unpacking
performance for some forms of unpacking from known sizes.</p></li>
<li><p>Make sure to use the fastest tuple API possible in all of Nuitka,
many place e.g. used <code class="docutils literal notranslate"><span class="pre">PyTuple_Size</span></code>, and one was in a performance
critical part, e.g. in code that used when compiled functions as
called as a method.</p></li>
<li><p>Added optimized variant for <code class="docutils literal notranslate"><span class="pre">_PyList_Extend</span></code> for slightly faster
unpacking code.</p></li>
<li><p>Added optimized variant for <code class="docutils literal notranslate"><span class="pre">PyList_Append</span></code> for faster list
contractions code.</p></li>
<li><p>Avoid using <code class="docutils literal notranslate"><span class="pre">RemoveFileSpec</span></code> and instead provide our own code for
that task, slightly reducing file size and avoiding to use the
<code class="docutils literal notranslate"><span class="pre">Shlapi</span></code> link library.</p></li>
</ul>
</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Made reflected test use common cleanup of test folder, which is more
robust against Windows locking issues.</p></li>
<li><p>Only output changed CPython output after the forced update of cached
value was done, avoiding duplicate or outdated outputs.</p></li>
<li><p>Avoid complaining about exceptions for in-place operations in case
they are lowered to non-inplace operations and then raise
unsupported, not worth the effort to retain original operator.</p></li>
<li><p>Added generated test for subscript operations, also expanding
coverage in generated tests by making sure, conditional paths are
both taken by varying the <code class="docutils literal notranslate"><span class="pre">cond</span></code> value.</p></li>
<li><p>Use our own code helper to check if an object has an attribute, which
is faster, because it avoids creating exceptions in the first place,
instead of removing them afterwards.</p></li>
</ul>
</div>
<div class="section" id="cleanups">
<h2>Cleanups<a class="headerlink" href="#cleanups" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Make sure that code generation always go through the C type objects
rather than local <code class="docutils literal notranslate"><span class="pre">elif</span></code> casing of the type. This required cleaning
up many of the methods and making code more abstract.</p></li>
<li><p>Added base class for C types without reference counting, so they can
share the code that ignores their handling.</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">getConstant</span></code> for constant value nodes, use the more general
<code class="docutils literal notranslate"><span class="pre">getCompileTimeConstant</span></code> instead, and provide quick methods that
test for empty tuple or dict, to use for checking concrete values,
e.g. with call operations.</p></li>
<li><p>Unified container creation into always using a factory function, to
be sure that existing container creations are not empty.</p></li>
<li><p>Stop using <code class="docutils literal notranslate"><span class="pre">&#64;calledWithBuiltinArgumentNamesDecorator</span></code> where
possible, and instead make explicit wrapping or use correct names.
This was used to allow e.g. an argument named <code class="docutils literal notranslate"><span class="pre">list</span></code> to be passed
from built-in optimization, but that can be done in a cleaner
fashion. Also aligned no attributes and the argument names, there was
inconsistency there.</p></li>
<li><p>Name mangling was done differently for attribute names and normal
names and with non-shared code, and later than necessary, removing
this as a step from variable closure taking after initial tree build.</p></li>
<li><p>As part of the icon changes, now handled in Python code, we stop
using the <code class="docutils literal notranslate"><span class="pre">rc</span></code> binary and handle all resources ourselves, allowing
to remove that code from the Scons side of things.</p></li>
<li><p>Moved file comparison code of standalone mode into file utils
function for use in plugins as well.</p></li>
<li><p>Unified how path concatenation is done in Nuitka helper code, there
were more or less complete variants, this is making sure, the most
capable form is used in all cases.</p></li>
<li><p>Massive cleanup to our scons file, by moving out util code that only
scons uses, hacks we apply to speed up scons, and more to separate
modules with dedicated interfaces.</p></li>
<li><p>When using <code class="docutils literal notranslate"><span class="pre">enumerate</span></code> we now provide start value of 1 where it is
appropriate, e.g. when counting source code lines, rather than adding
<code class="docutils literal notranslate"><span class="pre">count+1</span></code> on every usage, making code more readable.</p></li>
</ul>
</div>
<div class="section" id="organisational">
<h2>Organisational<a class="headerlink" href="#organisational" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Do not recommend Anaconda on Windows anymore, it seems barely
possible to get anything installed on it with a fresh download, due
to the resolver literally working for days without finishing, and
then reporting conflicts, it would only we usable when starting with
Miniconda, but that seems less interesting to users, also gcc 5.2 is
way too old these days.</p></li>
<li><p>The commit hook should be reinstalled, since it got improved and
adapted for newer git versions.</p></li>
<li><p>Added link to donations to funding document, following a Github
standard.</p></li>
<li><p>Bumped requirements for development to the latest versions, esp.
newer isort.</p></li>
<li><p>Added a rough description of tests to do to add a new CPython test
suite, to allow others to take this task in the future.</p></li>
<li><p>Updated the git hook so that Windows and newest git works.</p></li>
<li><p>Make it more clear in the documentation that Microsoft Appstore
Python is not supported.</p></li>
</ul>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>This is the big release in terms of scalability. The optimization in
this release mostly focused on getting things that cause increased
compile times sorted out. A very important fix avoids loop optimization
to leak into global passes of all modules unnecessarily, but just as
important, generated code now is much better for the C compiler to
consume in observed problematic cases.</p>
<p>More optimization changes are geared towards reducing Nuitka frontend
compile time, which could also be a lot in some cases, ending up
specializing more constant nodes and how they expose themselves to
optimization.</p>
<p>Other optimization came from supporting Python 3.9 and things come
across during the implementation of that feature, e.g. to be able to
make differences with unpacking error messages, we provide more code to
handle it ourselves, and to manually optimize how to interact with e.g.
<code class="docutils literal notranslate"><span class="pre">list</span></code> objects.</p>
<p>For Windows, the automatic download of <code class="docutils literal notranslate"><span class="pre">ccache</span></code> and a matching MinGW64
if none was found, is a new step, that should lower the barrier of entry
for people who have no clue what a C compiler is. More changes are bound
to come in this field with future releases, e.g. making a minimum
version requirement for gcc on Windows that excludes unfit C compilers.</p>
<p>All in all, this release should be taken as a major cleanup, resolving
many technical debts of Nuitka and preparing more optimization to come.</p>
</div>
</div>

<div class="section">
    

<div class="section">
  <span style="float: left">
     上一页:
    
    <a href="nuitka-release-069.html">
       Nuitka Release 0.6.9
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     下一页: 
    <a href="nuitka-release-0611.html">
      Nuitka Release 0.6.11 
    </a>
    
  </span>
</div>
  
</div>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Kay Hayen<br/>
    
        &copy; Copyright 2022, Kay Hayen and Nuitka Contributors.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>