<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nuitka Release 0.6.18</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/asciinema-player_2.6.1.css" type="text/css" />
      <link rel="stylesheet" href="../_static/asciinema-custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" type="text/css" />
    <link rel="canonical" href="https://nuitka.net/posts/nuitka-release-0618.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/tabs.js"></script>
        <script src="../_static/asciinema-player_2.6.1.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />   
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Nuitka Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Nuitka the Python Compiler
            <img src="../_static/Nuitka-Logo-Symbol.png" class="logo" alt="Logo"/>
          </a><!-- Empty override file take the place of searchbox.html, which generates search box. -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use.html">国际化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Commercial Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/commercial.html">Nuitka Commercial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html">Nuitka Release 0.6.19 (Draft)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-18">Nuitka Release 0.6.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-17">Nuitka Release 0.6.17</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#older-releases">Older Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/roadmap.html">Roadmap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/api-doc.html">API doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/factory.html">Factory Instructions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Media</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/Presentations.html">Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/Streaming.html">Streaming</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/impressum.html">Impressum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Under construction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/pyside2.html">Nuitka PySide2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/donations.html">Donations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/gsoc2019.html">Google Summer of Code 2019</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/nuitka-demo.html">Nuitka Demo</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nuitka the Python Compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <section id="nuitka-release-0-6-18">
<h1>Nuitka Release 0.6.18<a class="headerlink" href="#nuitka-release-0-6-18" title="Permalink to this headline"></a></h1>
<p>This is to inform you about the new stable release of <a class="reference external" href="https://nuitka.net">Nuitka</a>. It is the extremely compatible Python compiler,
<a class="reference external" href="/doc/download.html">“download now”</a>.</p>
<p>This release has a focus on new features of all kinds, and then also new
kinds of performance improvements, some of which enable static
optimization of what normally would be dynamic imports, while also
polishing plugins and adding also many new features and a huge amount of
organisational changes.</p>
<section id="bug-fixes">
<h2>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Python3.6+: Fixes to asyncgen, need to raise <code class="docutils literal notranslate"><span class="pre">StopAsyncInteration</span></code>
rather than <code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> in some situations to be fully
compatible.</p></li>
<li><p>Onefile: Fix, LTO mode was always enabled for onefile compilation,
but not all compilers support it yet, e.g. MinGW64 did not. Fixed in
0.6.17.1 already.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">type</span></code> calls with 3 arguments didn’t annotate their potential
exception exit. Fixed in 0.6.17.2 already.</p></li>
<li><p>Fix, trusted module constants were not working properly in all cases.
Fixed in 0.6.17.2 already.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">pkg-resources</span></code> exiting with error at compile time for
unresolved requirements in compiled code, but these can of course
still be optional, i.e. that code would never run. Instead give only
a warning, and runtime fail on these. Fixed in 0.6.17.2 already.</p></li>
<li><p>Standalone: Prevent the inclusion of <code class="docutils literal notranslate"><span class="pre">drm</span></code> libraries on Linux, they
have to come from the target OS at runtime. Fixed in 0.6.17.2
already.</p></li>
<li><p>Standalone: Added missing implicit dependency for <code class="docutils literal notranslate"><span class="pre">ipcqueue</span></code>
module. Fixed in 0.6.17.3 already.</p></li>
<li><p>Fix, Qt webengine support for everything but <code class="docutils literal notranslate"><span class="pre">PySide2</span></code> wasn’t
working properly. Partially fixed in 0.6.17.3 already.</p></li>
<li><p>Windows: Fix, bootstrap splash screen code for Windows was missing in
release packages. Fixed in 0.6.17.3 already.</p></li>
<li><p>Fix, could crash on known implicit data directories not present.
Fixed in 0.6.17.3 already.</p></li>
<li><p>macOS: Disable download of <code class="docutils literal notranslate"><span class="pre">ccache</span></code> binary for M1 architecture and
systems before macOS 10.14 as it doesn’t work on these. Fixed in
0.6.17.3 already.</p></li>
<li><p>Standalone: The <code class="docutils literal notranslate"><span class="pre">pendulum.locals</span></code> handling for Python 3.6 was
regressed. Fixed in 0.6.17.4 already.</p></li>
<li><p>Onefile: Make sure the child process is cleaned up even after its
successful exit. Fixed in 0.6.17.4 already.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">xmlschema</span></code>. Fixed in 0.6.17.4
already.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">curses</span></code> on Windows. Fixed in
0.6.17.4 already.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">coincurve</span></code> module. Fixed in 0.6.17.5
already.</p></li>
<li><p>Python3.4+: Up until Python3.7 inclusive, a workaround for stream
encoding (was ASCII), causing crashes on output of non-ASCII, other
Python versions are not affected. Fixed in 0.6.17.5 already.</p></li>
<li><p>Python2: Workaround for LTO error messages from older gcc versions.
Fixed in 0.6.17.5 already.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">win32print</span></code>. Fixed in 0.6.17.6
already.</p></li>
<li><p>Fix, need to prevent usage of static <code class="docutils literal notranslate"><span class="pre">libpython</span></code> in module mode or
else on some Python versions, linker errors can happen. Fixed in
0.6.17.6 already.</p></li>
<li><p>Standalone: Do not load <code class="docutils literal notranslate"><span class="pre">site</span></code> module early anymore. This might
have caused issues in some configurations, but really only would be
needed for loading <code class="docutils literal notranslate"><span class="pre">inspect</span></code> which doesn`t depend on it in
standalone mode. Fixed in 0.6.17.6 already.</p></li>
<li><p>Fix, could crash with generator expressions in finally blocks of
tried blocks that return. Fixed in 0.6.17.7 already.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
   <span class="k">return</span> <span class="mi">9</span>
<span class="k">finally</span><span class="p">:</span>
   <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="sa">b</span><span class="s2">&quot;some_iterable&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Python3.5+: Compatibility of comparisons with <code class="docutils literal notranslate"><span class="pre">types.CoroutineType</span></code>
and <code class="docutils literal notranslate"><span class="pre">types.AsyncGeneratorType</span></code> types was not yet implemented. Fixed
in 0.6.17.7 already.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># These already worked:</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">compiledCoroutine</span><span class="p">(),</span> <span class="n">types</span><span class="o">.</span><span class="n">CoroutineType</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">compiledAsyncgen</span><span class="p">(),</span> <span class="n">types</span><span class="o">.</span><span class="n">AsyncGeneratorType</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

<span class="c1"># These now work too:</span>
<span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">compiledCoroutine</span><span class="p">())</span> <span class="o">==</span> <span class="n">types</span><span class="o">.</span><span class="n">CoroutineType</span>
<span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">compiledAsyncgen</span><span class="p">())</span> <span class="o">==</span> <span class="n">types</span><span class="o">.</span><span class="n">AsyncGeneratorType</span>
</pre></div>
</div>
</li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">ruamel.yaml</span></code>. Fixed in 0.6.17.7
already.</p></li>
<li><p>Distutils: Fix, when building more than one package, things could go
wrong. Fixed in 0.6.17.7 already.</p></li>
<li><p>Fix, for module mode filenames are used, and for packages, you can
specify a directory, however, a trailing slash was not working. Fixed
in 0.6.17.7 already.</p></li>
<li><p>Compatibility: Fix, when locating modules, a package directory and an
extension module of the same name were not used according to
priority. Fixed in 0.6.17.7 already.</p></li>
<li><p>Standalone: Added workaround <code class="docutils literal notranslate"><span class="pre">importlib_resources</span></code> insisting on
Python source files to exist to be able to load datafiles. Fixed in
0.6.17.7 already.</p></li>
<li><p>Standalone: Properly detect usage of hard imports from standard
library in <code class="docutils literal notranslate"><span class="pre">--follow-stdlib</span></code> mode.</p></li>
<li><p>Standalone: Added data files for <code class="docutils literal notranslate"><span class="pre">opensapi_spec_validator</span></code>.</p></li>
<li><p>MSYS2: Fix, need to normalize compiler paths before comparing.</p></li>
<li><p>Anaconda: For accelerated binaries, the created <code class="docutils literal notranslate"><span class="pre">.cmd</span></code> file wasn’t
containing all needed environment.</p></li>
<li><p>macOS: Set minimum OS version derived from the Python executable
used, this should make it work on all supported platforms (of that
Python).</p></li>
<li><p>Standalone: Added support for automatic inclusion of <code class="docutils literal notranslate"><span class="pre">xmlschema</span></code>
package datafiles.</p></li>
<li><p>Standalone: Added support for automatic inclusion of <code class="docutils literal notranslate"><span class="pre">eel</span></code> package
datafiles.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">h5py</span></code> package.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">phonenumbers</span></code> package.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">feedparser</span></code> package, this currently
depends on the <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> plugin to be enabled, which will become
enabled by default in the future.</p></li>
<li><p>Standalone: Added <code class="docutils literal notranslate"><span class="pre">gi</span></code> plugin for said package that copies
<code class="docutils literal notranslate"><span class="pre">typelib</span></code> files and sets the search path for them in standalone
mode.</p></li>
<li><p>Standalone: Added necessary datafiles for <code class="docutils literal notranslate"><span class="pre">eel</span></code> package.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">QtWebEngine</span></code> to all Qt bindings and
also make it work on Linux. Before only PySide2 on Windows was
supported.</p></li>
<li><p>Python3: Fix, the <code class="docutils literal notranslate"><span class="pre">all</span></code> built-in was wrongly assuming that bytes
values could not be false, but in fact they are if they contain
<code class="docutils literal notranslate"><span class="pre">\0</span></code> which is actually false. The same does not happen for string
values, but that’s a difference to be considered.</p></li>
<li><p>Windows: The LTO was supposed to be used automatically on with MSVC
14.2 or higher, but that was regressed and has been repaired now.</p></li>
<li><p>Standalone: Extension modules contained in packages, depending on
their mode of loading had the <code class="docutils literal notranslate"><span class="pre">__package__</span></code> value set to a wrong
value, which at least impacted new matplotlib detection of Qt
backend.</p></li>
<li><p>Windows: The <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code> was installing binaries for
no good reason.</p></li>
</ul>
</section>
<section id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Setuptools support. Documented <code class="docutils literal notranslate"><span class="pre">bdist_nuitka</span></code> and <code class="docutils literal notranslate"><span class="pre">bdist_wheel</span></code>
integration and added support for Nuitka as a <code class="docutils literal notranslate"><span class="pre">build</span></code> package
backend in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> files. Using Nuitka to build your
wheels is supposed to be easy now.</p></li>
<li><p>Added experimental support for Python 3.10, there are however still
important issues with compatibility with the CPython 3.9 test suite
with at least asyncgen and coroutines.</p></li>
<li><p>macOS: For app bundles, version information can be provided with the
new option <code class="docutils literal notranslate"><span class="pre">--macos-app-version</span></code>.</p></li>
<li><p>Added Python vendor detection of <code class="docutils literal notranslate"><span class="pre">Anaconda</span></code>, <code class="docutils literal notranslate"><span class="pre">pyenv</span></code>, <code class="docutils literal notranslate"><span class="pre">Apple</span>
<span class="pre">Python</span></code>, and <code class="docutils literal notranslate"><span class="pre">pyenv</span></code> and output the result in version output, this
should make it easiert to analyse reported issues.</p></li>
<li><p>Plugins: Also handle the usage of <code class="docutils literal notranslate"><span class="pre">__name__</span></code> for metadata version
resolution of the <code class="docutils literal notranslate"><span class="pre">pkg-resources</span></code> standard plugin.</p></li>
<li><p>Plugins: The <code class="docutils literal notranslate"><span class="pre">data-files</span></code> standard plugin now reads configuration
from a Yaml file that <code class="docutils literal notranslate"><span class="pre">data-files.yml</span></code> making it more accessible
for contributions.</p></li>
<li><p>Windows: Allow enforcing usage of MSVC with <code class="docutils literal notranslate"><span class="pre">--msvc=latest</span></code>. This
allows you to prevent accidental usage of MinGW64 on Windows, when
MSVC is intended, but achieves that without fixing the version to
use.</p></li>
<li><p>Windows: Added support for LTO with MinGW64 on Windows, this was
previously limited to the MSVC compiler only.</p></li>
<li><p>Windows: Added support for using <code class="docutils literal notranslate"><span class="pre">--debugger</span></code> with the downloaded
MinGW64 provided <code class="docutils literal notranslate"><span class="pre">gdb.exe</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It doesn`t work when executed from a Git bash prompt, but e.g.
from a standard command prompt.</p>
</div>
</li>
<li><p>Added new experimental flag for compiled types to inherit from
uncompiled types. This should allow easier and more complete
compatibility, making even code in extension modules that uses
<code class="docutils literal notranslate"><span class="pre">PyObject_IsInstance</span></code> work, providing support for packages like
<code class="docutils literal notranslate"><span class="pre">pydanctic</span></code>.</p></li>
<li><p>Plugins: The Qt binding plugins now resolve <code class="docutils literal notranslate"><span class="pre">pyqtgraph</span></code> selection
of binding by hard coding <code class="docutils literal notranslate"><span class="pre">QT_LIB</span></code>. This will allow to resolve its
own dynamic imports depending on that variable at compile time. At
this time, the compile time analysis is not covering all cases yet,
but we hope to get there.</p></li>
<li><p>macOS: Provide <code class="docutils literal notranslate"><span class="pre">minOS</span></code> for standalone builds, derived from the
setting of the Python used to create it.</p></li>
<li><p>UI: Added new option <code class="docutils literal notranslate"><span class="pre">--disable-ccache</span></code> to prevent Nuitka from
injecting <code class="docutils literal notranslate"><span class="pre">ccache</span></code> (Clang, gcc) and <code class="docutils literal notranslate"><span class="pre">clcache</span></code> (MSVC) for caching
the C results of the compilation.</p></li>
<li><p>Plugins: Added experimental support for <code class="docutils literal notranslate"><span class="pre">PyQt6</span></code>. While using
<code class="docutils literal notranslate"><span class="pre">PySide2</span></code> or <code class="docutils literal notranslate"><span class="pre">PySide6</span></code> is very much recommended with Nuitka, this
allows its use.</p></li>
<li><p>UI: Added option <code class="docutils literal notranslate"><span class="pre">--low-memory</span></code> to allow the user to specify that
the compilation should attempt to use less memory where possible,
this increases compile times, but might enable compilation on some
weaker machines.</p></li>
</ul>
</section>
<section id="optimization">
<h2>Optimization<a class="headerlink" href="#optimization" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Added dedicated attribute nodes for attribute values that match names
of dictionary operations. These are optimized into dedicate nodes for
methods of dictionaries should their expression have an exact
dictionary shape. These in turn optimize calls on them statically
into dictionary operations. This is done for all methods of <code class="docutils literal notranslate"><span class="pre">dict</span></code>
for both Python2 and Python3, namely <code class="docutils literal notranslate"><span class="pre">get</span></code>, <code class="docutils literal notranslate"><span class="pre">items</span></code>,
<code class="docutils literal notranslate"><span class="pre">iteritems</span></code>, <code class="docutils literal notranslate"><span class="pre">itervalues</span></code>, <code class="docutils literal notranslate"><span class="pre">iterkeys</span></code>, <code class="docutils literal notranslate"><span class="pre">viewvalues</span></code>,
<code class="docutils literal notranslate"><span class="pre">viewkeys</span></code>, <code class="docutils literal notranslate"><span class="pre">pop</span></code>, <code class="docutils literal notranslate"><span class="pre">setdefault</span></code>, <code class="docutils literal notranslate"><span class="pre">has_key</span></code>, <code class="docutils literal notranslate"><span class="pre">clear</span></code>,
<code class="docutils literal notranslate"><span class="pre">copy</span></code>, <code class="docutils literal notranslate"><span class="pre">update</span></code>.</p>
<p>The new operation nodes also add compile time optimization for being
used on constant values where possible.</p>
</li>
<li><p>Also added dedicated attribute nodes for string operations. For
operations, currently only part of the methods are done. These are
currently only <code class="docutils literal notranslate"><span class="pre">join</span></code>, <code class="docutils literal notranslate"><span class="pre">strip</span></code>, <code class="docutils literal notranslate"><span class="pre">lstrip</span></code>, <code class="docutils literal notranslate"><span class="pre">rstrip</span></code>,
<code class="docutils literal notranslate"><span class="pre">partition</span></code>, <code class="docutils literal notranslate"><span class="pre">rpartition</span></code>. Besides performance, this subset was
enough to cover compile time evaluation of module name computation
for <code class="docutils literal notranslate"><span class="pre">importlib.import_module</span></code> as done by SWIG bindings, allowing
these implicit dependencies to be discovered at compile time without
any help, marking a significant improvement for standalone usage.</p></li>
<li><p>Annotate type shape for dictionary <code class="docutils literal notranslate"><span class="pre">in</span></code>/<code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code> nodes, this was
missing unlike in the generic <code class="docutils literal notranslate"><span class="pre">in</span></code>/<code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code> nodes.</p></li>
<li><p>Faster processing of “expression only” statement nodes. These are
nodes, where a value is computed, but then not used, it still needs
to be accounted for though, representing the value release.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">something</span><span class="p">()</span> <span class="c1"># ignores return value, means statement only node</span>
</pre></div>
</div>
</li>
<li><p>Windows: Enabled LTO by default with MinGW64, which makes it produce
much faster results. It now yield faster binaries than MSVC 2019 with
pystone.</p></li>
<li><p>Windows: Added support for C level PGO (Profile Guided Optimization)
with MSVC and MinGW64, allowing extra speed boosts from the C
compilation on Windows as well.</p></li>
<li><p>Standalone: Better handling of <code class="docutils literal notranslate"><span class="pre">requests.packages</span></code> and
<code class="docutils literal notranslate"><span class="pre">six.moves</span></code>. The old handling could duplicate their code. Now uses
a new mechanism to resolve metapath based importer effects at compile
time.</p></li>
<li><p>Avoid useless exception checks in our dictionary helpers, as these
could only occur when working with dictionary overloads, which we
know to not be the case.</p></li>
<li><p>For nodes, have dedicated child mixin classes for nodes with a single
child value and for nodes with a tuple of children, so that these
common kind of nodes operate faster and don’t have to check at
runtime what type they are during access.</p></li>
<li><p>Actually make use of the egg cache. Nuitka was unpacking eggs in
every compilation, but in wheel installs, these can be quite common
and should be faster.</p></li>
<li><p>Star arguments annotated their type shape, but the methods to check
for dictionary exactly were not affected by this preventing
optimization in some cases.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> configuration for main programs present in the
modules of the standard library, these can be removed from the
compilation and should lower dependencies detected.</p></li>
<li><p>Using static libpython with <code class="docutils literal notranslate"><span class="pre">pyenv</span></code> automatically. This should give
both smaller (standalone mode) and faster results as is the case when
using this feature..</p></li>
<li><p>Plugins: Added improvements to the <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> plugin for
<code class="docutils literal notranslate"><span class="pre">gevent</span></code> to avoid including its testing framework.</p></li>
<li><p>Python3.9+: Faster calls into uncompiled functions from compiled code
using newly introduced API of that version.</p></li>
<li><p>Statically optimize <code class="docutils literal notranslate"><span class="pre">importlib.import_module</span></code> calls with constant
args into fixed name imports.</p></li>
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">sys.version_info</span></code> to be used as a compile time
constant. This should enable many checks to be done at compile time.</p></li>
<li><p>Added hard import and static optimization for
<code class="docutils literal notranslate"><span class="pre">typing.TYPE_CHECKING</span></code>.</p></li>
<li><p>Also compute named import lookup through variables, expanding their
use to more cases, e.g. like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="o">...</span>
<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
   <span class="o">...</span>
</pre></div>
</div>
</li>
<li><p>Also optimize compile time comparisons through variable names if
possible, i.e. the value cannot have changed.</p></li>
<li><p>Faster calls of uncompiled code with Python3.9 or higher avoiding DLL
call overhead.</p></li>
</ul>
</section>
<section id="organisational">
<h2>Organisational<a class="headerlink" href="#organisational" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Commercial: There are <code class="docutils literal notranslate"><span class="pre">Buy</span> <span class="pre">Now</span></code> buttons available now for the
direct purchase of the <a class="reference external" href="/pages/commercial.html">Nuitka Commercial</a>
offering. Finally Credit Card, Google Pay, and Apple Pay are all
possible. This is using Stripe. Get in touch with me if you want to
use bank transfer, which is of course still best for me.</p></li>
<li><p>The main script runners for Python2 have been renamed to <code class="docutils literal notranslate"><span class="pre">nuitka2</span></code>
and <code class="docutils literal notranslate"><span class="pre">nuitka2-run</span></code>, which is consistent with what we do for Python3,
and avoids issues where <code class="docutils literal notranslate"><span class="pre">bin</span></code> folder ends up in <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> and
prevents the loading of <code class="docutils literal notranslate"><span class="pre">nuitka</span></code> package.</p></li>
<li><p>Windows: Added support for Visual Studio 2022 by updating the inline
copy of Scons used for Windows to version 4.3.0, on non Windows, the
other ones will keep being used.</p></li>
<li><p>Windows: Requiring latest MinGW64 with version 11.2 as released by
winlibs, because this is known to allow LTO, where previous releases
were missing needed binaries.</p></li>
<li><p>Reject standalone mode usage with Apple Python, as it works only with
the other supported Pythons, avoiding pitfalls in attempting to
distribute it.</p></li>
<li><p>Move hosting of documentation to Sphinx, added Changelog and some
early parts of API documentation there too. This gives much more
readable results than what we have done so far with Nikola. More
things will move there.</p></li>
<li><p>User Manual: Add description how to access code attributes in
<code class="docutils literal notranslate"><span class="pre">nuitka-project</span></code> style options.</p></li>
<li><p>User Manual: Added commands used to generate performance numbers for
Python.</p></li>
<li><p>User Manual: List other Python’s for which static linking is supposed
to work.</p></li>
<li><p>Improved help for <code class="docutils literal notranslate"><span class="pre">--include-package</span></code> with a hint how to exclude
some of the subpackages.</p></li>
<li><p>Started using Jinja2 in code templates with a few types, adding basic
infrastructure to do that. This will be expanded in the future.</p></li>
<li><p>Updated plugin documentation with more recent information.</p></li>
<li><p>Added Python flavor as detected to the <code class="docutils literal notranslate"><span class="pre">--version</span></code> output for
improved bug reports.</p></li>
<li><p>Linux: Added distribution name to <code class="docutils literal notranslate"><span class="pre">--version</span></code> output for improved
bug reports.</p></li>
<li><p>Always enable the <code class="docutils literal notranslate"><span class="pre">gevent</span></code> plugin, we want to achieve this for all
plugins, and this is only a step in that direction.</p></li>
<li><p>Added project URLs for PyPI, so people looking at it from there have
some immediate places to checkout.</p></li>
<li><p>Debian: Use common code for included PDF files, which have page
styles and automatic corrections for <code class="docutils literal notranslate"><span class="pre">rst2pdf</span></code> applied.</p></li>
<li><p>Updated to latest <code class="docutils literal notranslate"><span class="pre">black</span></code>, <code class="docutils literal notranslate"><span class="pre">isort</span></code>, <code class="docutils literal notranslate"><span class="pre">pylint</span></code> versions.</p></li>
<li><p>The binary names for Python2 changed from <code class="docutils literal notranslate"><span class="pre">nuitka</span></code> and
<code class="docutils literal notranslate"><span class="pre">nuitka-run</span></code> to <code class="docutils literal notranslate"><span class="pre">nuitka2</span></code> and <code class="docutils literal notranslate"><span class="pre">nuitka2-run</span></code>. This harmonizes it
with Python2 and avoids issues, where the <code class="docutils literal notranslate"><span class="pre">bin</span></code> folder in
<code class="docutils literal notranslate"><span class="pre">sys.path</span></code> can cause issues with re-execution of Nuitka finding
those to import.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You ought to be using <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">nuitka</span></code> style of calling Nuitka
anyway, as it gives you best control over what Python is used to
run Nuitka, you can pick <code class="docutils literal notranslate"><span class="pre">python2</span></code> there if you want it to run
with that, even with full path. Check the relevant section in the
User Manual too.</p>
</div>
</li>
<li><p>Added support for Fedora 34 and Fedora 35.</p></li>
</ul>
</section>
<section id="cleanups">
<h2>Cleanups<a class="headerlink" href="#cleanups" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>In a change of mind <code class="docutils literal notranslate"><span class="pre">--enable-plugin</span></code> has become the only form to
enable a plugin used in documentation and tests.</p></li>
<li><p>Massive cleanup of <code class="docutils literal notranslate"><span class="pre">numpy</span></code> and Qt binding plugins, e.g.
<code class="docutils literal notranslate"><span class="pre">pyside2</span></code>. Data files and DLLs are now provided through proper
declarative objects rather than copied manually. The handling of
PyQt5 from the plugin should have improved as a side effect.</p></li>
<li><p>Massive cleanups of all documentation in ReST format. Plenty of
formatting errors were resolved. Many typos were identified and
globally fixed. Spellings e.g. of “Developer Manual” are now enforced
with automatic replacements. Also missing or wrong quotes were turned
to proper methods. Also enforce code language for shell scripts to be
the same everywhere.</p></li>
<li><p>Removed last usages of <code class="docutils literal notranslate"><span class="pre">getPythonFlags()</span></code> and made the function
private, replacing their use with dedicated function to check for
individual flags.</p></li>
<li><p>Avoid string comparison with <code class="docutils literal notranslate"><span class="pre">nuitka.utils.getOS()</span></code> and instead add
accessors that are more readable, e.g. <code class="docutils literal notranslate"><span class="pre">nuitka.utils.isMacOS()</span></code> and
put them to use where it makes sense.</p></li>
<li><p>Replaced usages of string tests in list of python flags specified,
with functions that check for a specific name with a speaking
function name.</p></li>
<li><p>Added mixin for expressions that have no side effect outside of their
value, providing common method implementation more consistently.</p></li>
<li><p>Remove code geared to using old PyLint and on Python2, we no longer
use that. Also removed annotations only used for overriding Python2
builtins from Nuitka code.</p></li>
<li><p>The PDF specific annotations were moved into being applied only in
the PDF building step, avoiding errors for raw PDF directives.</p></li>
<li><p>Apply Visual Code autoformat to our Yaml files. This is unfortunately
not and automatic formatting yet.</p></li>
<li><p>Introduce dedicated <code class="docutils literal notranslate"><span class="pre">nuitka.utils.Json</span></code> module, as we intend to
expand its usage, e.g. for caching.</p></li>
<li><p>Replacing remaining usages of <code class="docutils literal notranslate"><span class="pre">print</span></code> functions with uses of
<code class="docutils literal notranslate"><span class="pre">nuitka.Tracing</span></code> instead.</p></li>
<li><p>Massive cleanup of the <code class="docutils literal notranslate"><span class="pre">gevent</span></code> plugin, user proper method to
execute code after module load, rather than source patching without
need. The plugin no longer messes with inclusions that other code
already provides for standalone.</p></li>
<li><p>Using own helper to update <code class="docutils literal notranslate"><span class="pre">sys</span></code> module attributes, to avoid errors
from old C compilers, and also cleaning up using code to not have to
cast on string constants.</p></li>
<li><p>More consistent naming of plugin classes, and enforce a relationship
of detector class names to the names of detected plugins. The new
naming consistency is now enforced.</p></li>
</ul>
</section>
<section id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Added CPython 3.10 test suite, it needs more work though.</p></li>
<li><p>Added generated test that exercises dictionary methods in multiple
variations.</p></li>
<li><p>Test suite names were specified wrongly in a few of them.</p></li>
</ul>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline"></a></h2>
<p>This release is again a huge step forward. It refines on PGO and LTO for
C level to work with all relevant compilers. Internally Python level PGO
is prepared, but only a future release will feature it. With that,
scalability improvements as well as even more performance improvements
will be unlocked.</p>
<p>The amount of optimization added this time is even bigger, some of which
unlocks static optimization of module imports, that previously would
have to be considered implicit. This work will need one extra step,
namely to also trace hard imports on the function level, then this will
be an extremely powerful tool to solve these kinds of issues in the
future. The next release will have this and go even further in this
area.</p>
<p>With the dictionary methods, and some string methods, also a whole new
kind of optimization has been started. These will make working with
<code class="docutils literal notranslate"><span class="pre">dict</span></code> containers faster, but obviously a lot of ground is to cover
there still, e.g. <code class="docutils literal notranslate"><span class="pre">list</span></code> values are a natural target not yet started.
Future releases will progress here.</p>
<p>Type specialization for Python3 has not progressed though, and will have
to be featured in a future releases though.</p>
<p>For scalability, the <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> work has continued, and this should
be the last release, where this is not on by default. Compiling without
it is something that is immediately noticeable in exploding module
amounts. It is very urgently recommended to enable it for your
compilations.</p>
<p>The support for macOS has been refined, with version information being
possible to add, and adding information to the binary about which OSes
are supported, as well as rejecting Apple Python, which is only a trap
if you want to deploy to other OS versions. More work will be needed to
support <code class="docutils literal notranslate"><span class="pre">pyenv</span></code> or even Homebrew there too, for now CPython is still
the recommended platform to use.</p>
<p>This release achieves major compatibility improvements. And of course,
the experimental support for 3.10 is not the least. The next release
will strive to complete the support for it fully, but this should be
usable at least, for now please stay on 3.9 if you can.</p>
</section>
</section>

<div class="section">
    

<div class="section">
  <span style="float: left">
     Previous:
    
    <a href="nuitka-release-0617.html">
       Nuitka Release 0.6.17
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
    
  </span>
</div>
  
</div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kay Hayen and Nuitka Contributors.</p>
  </div>

  
<div class='share-button-container'>
    <div class="socialbutton-wrapper">
        <a href="https://twitter.com/share?url=https://nuitka.net/posts/nuitka-release-0618.html&hashtags=nuitka" target="_blank">
            <div class="socialbutton twitter" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-twitter.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="https://www.facebook.com/sharer.php?u=https://nuitka.net/posts/nuitka-release-0618.html&hashtag=%23nuitka"  target="_blank">
            <div class="socialbutton facebook" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-facebook.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="http://www.reddit.com/submit?url=https://nuitka.net/posts/nuitka-release-0618.html" target="_blank">
            <div class="socialbutton reddit">
                <p class="icon">
                    <img src="/_static/icon-reddit.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
      $('a[href^="http://"], a[href^="https://"]').not('a[class*=internal]').attr('target', '_blank');
    });
  </script>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-V73VK1T804"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-V73VK1T804', {
          'anonymize_ip': true,
      });
    </script> 

</body>
</html>