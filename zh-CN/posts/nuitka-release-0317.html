<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nuitka Release 0.3.17</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/asciinema-player_2.6.1.css" type="text/css" />
      <link rel="stylesheet" href="../_static/asciinema-custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" type="text/css" />
    <link rel="canonical" href="https://nuitka.net/posts/nuitka-release-0317.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/tabs.js"></script>
        <script src="../_static/asciinema-player_2.6.1.js"></script>
        <script src="../_static/translations.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />   
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Nuitka Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Nuitka the Python Compiler
            <img src="../_static/Nuitka-Logo-Symbol.png" class="logo" alt="Logo"/>
          </a><!-- Empty override file take the place of searchbox.html, which generates search box. -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/download.html">下载</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/support.html">支持</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">商务用户</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/commercial.html">Nuitka Commercial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">发行信息</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html">Nuitka Release 0.6.19 (Draft)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-18">Nuitka Release 0.6.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-17">Nuitka Release 0.6.17</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#older-releases">Older Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/roadmap.html">路线图</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">更多文档</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/api-doc.html">API 文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/factory.html">工厂说明书</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">媒体</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/Presentations.html">演讲稿</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/Streaming.html">流媒体</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">其他</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/impressum.html">祈求</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">建设中</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/pyside2.html">Nuitka PySide2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/donations.html">Donations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/gsoc2019.html">Google Summer of Code 2019</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/nuitka-demo.html">Nuitka Demo</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nuitka the Python Compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <section id="nuitka-release-0-3-17">
<h1>Nuitka Release 0.3.17<a class="headerlink" href="#nuitka-release-0-3-17" title="永久链接至标题"></a></h1>
<p>This is to inform you about the new stable release of <a class="reference external" href="https://nuitka.net">Nuitka</a>. It is the extremely compatible Python compiler,
<a class="reference external" href="/doc/download.html">“download now”</a>.</p>
<p>This is to inform you about the new stable release of Nuitka. This time
there are a few bug fixes, lots of very important organisational work,
and yet again improved compatibility and cleanups. Also huge is the
advance in making <code class="docutils literal notranslate"><span class="pre">--deep</span></code> go away and making the recursion of Nuitka
controllable, which means a lot for scalability of projects that use a
lot of packages that use other packages, because now you can choose
which ones to embed and which ones one.</p>
<p>The release cycle had a focus on improving the quality of the test
scripts, the packaging, and generally to prepare the work on “type
inference” in a new feature branch.</p>
<p>I have also continued to work towards CPython3.2 compatibility, and this
version, while not there, supports Python3 with a large subset of the
basic tests programs running fine (of course via <code class="docutils literal notranslate"><span class="pre">2to3</span></code> conversion)
without trouble. There is still work to do, exceptions don’t seem to
work fully yet, parameter parsing seems to have changed, etc. but it
seems that CPython3.2 is going to work one day.</p>
<p>And there has been a lot of effort, to address the Debian packaging to
be cleaner and more complete, addressing issues that prevented it from
entering the Debian repository.</p>
<section id="bug-fixes">
<h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="永久链接至标题"></a></h2>
<ul class="simple">
<li><p>Fixed the handling of modules and packages of the same name, but with
different casing. Problem showed under Windows only. Released as
0.3.16a hot fix already.</p></li>
<li><p>Fixed an error where the command line length of Windows was exceeded
when many modules were embedded, Christopher Tott provided a fix for
it. Released as 0.3.16a hot fix already.</p></li>
<li><p>Fix, avoid to introduce new variables for where built-in exception
references are sufficient. Released as 0.3.16b hot fix already.</p></li>
<li><p>Fix, add the missing <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code> decorator to <code class="docutils literal notranslate"><span class="pre">__new__</span></code>
methods before resolving the scopes of variables, this avoids the use
of that variable before it was assigned a scope. Released as 0.3.16b
hot fix already.</p></li>
</ul>
</section>
<section id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="永久链接至标题"></a></h2>
<ul>
<li><p>Enhanced compatibility again, provide enough <code class="docutils literal notranslate"><span class="pre">co_varnames</span></code> in the
code objects, so that slicing them up to <code class="docutils literal notranslate"><span class="pre">code_object.co_argcount</span></code>
will work. They are needed by <code class="docutils literal notranslate"><span class="pre">inspect</span></code> module and might be used by
some decorators as well.</p></li>
<li><p>New options to control the recursion:</p>
<p><code class="docutils literal notranslate"><span class="pre">--recurse-none</span></code> (do not warn about not-done recursions)
<code class="docutils literal notranslate"><span class="pre">--recurse-all</span></code> (recurse to all otherwise warned modules)
<code class="docutils literal notranslate"><span class="pre">--recurse-to</span></code> (confirm to recurse to those modules)
<code class="docutils literal notranslate"><span class="pre">--recurse-not-to</span></code> (confirm to not recurse to those modules)</p>
</li>
</ul>
</section>
<section id="optimization">
<h2>Optimization<a class="headerlink" href="#optimization" title="永久链接至标题"></a></h2>
<ul class="simple">
<li><p>The optimization of constant conditional expressions was not done
yet. Added this missing constant propagation case.</p></li>
<li><p>Eliminate near empty statement sequences (only contain a pass
statement) in more places, giving a cleaner node structure for many
constructs.</p></li>
<li><p>Use the pickle “protocol 2” on CPython2 except for <code class="docutils literal notranslate"><span class="pre">unicode</span></code>
strings where it does not work well. It gives a more compressed and
binary representation, that is generally more efficient to un-stream
as well. Also use the cPickle protocol, the use of <code class="docutils literal notranslate"><span class="pre">pickle</span></code> was not
really necessary anymore.</p></li>
</ul>
</section>
<section id="organisational">
<h2>Organisational<a class="headerlink" href="#organisational" title="永久链接至标题"></a></h2>
<ul class="simple">
<li><p>Added a <a class="reference external" href="https://nuitka.net/doc/developer-manual.html">Developer Manual</a> to the release.
It’s incomplete, but it details some of the existing stuff, coding
rules, plans for “type inference”, etc.</p></li>
<li><p>Improved the <code class="docutils literal notranslate"><span class="pre">--help</span></code> output to use <code class="docutils literal notranslate"><span class="pre">metavar</span></code> where applicable.
This makes it more readable for some options.</p></li>
<li><p>Instead of error message, give help output when no module or program
file name was given. This makes Nuitka help out more convenient.</p></li>
<li><p>Consistently use <code class="docutils literal notranslate"><span class="pre">#!/usr/bin/env</span> <span class="pre">python</span></code> for all scripts, this was
previously only done for some of them.</p></li>
<li><p>Ported the PyLint check script to Python as well, enhancing it on the
way to check the exit code, and to only output changes things, as
well as making the output of warnings for <code class="docutils literal notranslate"><span class="pre">TODO</span></code> items optional.</p></li>
<li><p>All scripts used for testing, PyLint checking, etc. now work with
Python3 as well. Most useful on Arch Linux, where it’s also already
the default for <code class="docutils literal notranslate"><span class="pre">Python</span></code>.</p></li>
<li><p>The help output of Nuitka was polished a lot more. It is now more
readable and uses option groups to combine related options together.</p></li>
<li><p>Make the tests run without any dependence on <code class="docutils literal notranslate"><span class="pre">PATH</span></code> to contain the
executables of Nuitka. This makes it easier to use.</p></li>
<li><p>Add license texts to 3rd party file that were missing them, apply
<code class="docutils literal notranslate"><span class="pre">licensecheck</span></code> results to cleanup Nuitka. Also removed own
copyright statement from in-line copy of Scons, it had been added by
accident only.</p></li>
<li><p>Release the tests that I own as well as the Debian packaging I
created under “Apache License 2.0” which is very liberal, meaning
every project will be able to use it.</p></li>
<li><p>Don’t require copyright assignment for contributions anymore, instead
only “Apache License 2.0”, the future Nuitka license, so that the
code won’t be a problem when changing the license of all of Nuitka to
that license.</p></li>
<li><p>Give contributors listed in the <a class="reference external" href="https://nuitka.net/doc/user-manual.html">User Manual</a> an exception to the GPL
terms until Nuitka is licensed under “Apache License 2.0” as well.</p></li>
<li><p>Added an <code class="docutils literal notranslate"><span class="pre">--experimental</span></code> option which can be used to control
experimental features, like the one currently being added on branch
<code class="docutils literal notranslate"><span class="pre">feature/ctypes_annotation</span></code>, where “type inference” is currently
only activated when that option is given. For this stable release, it
does nothing.</p></li>
<li><p>Check the static C++ files of Nuitka with <code class="docutils literal notranslate"><span class="pre">cppcheck</span></code> as well.
Didn’t find anything.</p></li>
<li><p>Arch Linux packages have been contributed, these are linked for
download, but the stable package may lag behind a bit.</p></li>
</ul>
</section>
<section id="cleanups">
<h2>Cleanups<a class="headerlink" href="#cleanups" title="永久链接至标题"></a></h2>
<ul class="simple">
<li><p>Changed <code class="docutils literal notranslate"><span class="pre">not</span></code> boolean operation to become a normal operator.
Changed <code class="docutils literal notranslate"><span class="pre">and</span></code> and <code class="docutils literal notranslate"><span class="pre">or</span></code> boolean operators to a new base class, and
making their interface more similar to that of operations.</p></li>
<li><p>Added cumulative <code class="docutils literal notranslate"><span class="pre">tags</span></code> to node classes for use in checks. Use it
annotate which node kinds to visit in e.g. per scope finalization
steps. That avoids kinds and class checks.</p></li>
<li><p>Enhanced the “visitor” interface to provide more kinds of callbacks,
enhanced the way “each scope” visiting is achieved by generalizing is
as “child has not tag ‘closure_taker’” and that for every “node that
has tag ‘closure_taker’”.</p></li>
<li><p>Moved <code class="docutils literal notranslate"><span class="pre">SyntaxHighlighting</span></code> module to <code class="docutils literal notranslate"><span class="pre">nuitka.gui</span></code> package where
it belongs.</p></li>
<li><p>More white listing work for imports. As recursion is now the default,
and leads to warnings for non-existent modules, the CPython tests
gave a lot of good candidates for import errors that were white
listed.</p></li>
<li><p>Consistently use <code class="docutils literal notranslate"><span class="pre">nuitka</span></code> in test scripts, as there isn’t a
<code class="docutils literal notranslate"><span class="pre">Nuitka.py</span></code> on all platforms. The later is scheduled for removal.</p></li>
<li><p>Some more PyLint cleanups.</p></li>
</ul>
</section>
<section id="new-tests">
<h2>New Tests<a class="headerlink" href="#new-tests" title="永久链接至标题"></a></h2>
<ul>
<li><p>Make sure the basic tests pass with CPython or else fail the test.
This is to prevent false positives, where a test passes, but only
because it fails in CPython early on and then does so with Nuitka
too. For the syntax tests we make sure they fail.</p></li>
<li><p>The basic tests can now be run with <code class="docutils literal notranslate"><span class="pre">PYTHON=python3.2</span></code> and use
<code class="docutils literal notranslate"><span class="pre">2to3</span></code> conversion in that case. Also the currently not passing
tests are not run, so the passing tests continue to do so, with this
run from the release test script <code class="docutils literal notranslate"><span class="pre">check-release</span></code>.</p></li>
<li><p>Include the syntax tests in release tests as well.</p></li>
<li><p>Changed many existing tests so that they can run under CPython3 too.
Of course this is via <code class="docutils literal notranslate"><span class="pre">2to3</span></code> conversion.</p></li>
<li><p>Don’t fail if the CPython test suites are not there.</p>
<p>Currently they remain largely unpublished, and as such are mostly
only available to me (exception,
<code class="docutils literal notranslate"><span class="pre">feature/minimize_CPython26_tests_diff</span></code> branch references the
CPython2.6 tests repository, but that remains work in progress).</p>
</li>
<li><p>For the compile itself test: Make the presence of the Scons in-line
copy optional, the Debian package doesn’t contain it.</p></li>
<li><p>Also make it more portable, so it runs under Windows too, and allow
to choose the Python version to test. Check this test with both
CPython2.6 and CPython2.7 not only the default Python.</p></li>
<li><p>Before releasing, test that the created Debian package builds fine in
a minimal Debian <code class="docutils literal notranslate"><span class="pre">unstable</span></code> chroot, and passes all the tests
included in the package (<code class="docutils literal notranslate"><span class="pre">basics</span></code>, <code class="docutils literal notranslate"><span class="pre">syntax</span></code>, <code class="docutils literal notranslate"><span class="pre">programs</span></code>,
<code class="docutils literal notranslate"><span class="pre">reflected</span></code>). Also many other Debian packaging improvements.</p></li>
</ul>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="永久链接至标题"></a></h2>
<p>The “git flow” was used again in this release cycle and proved to be
useful not only for hot fix, but also for creating the branch
<code class="docutils literal notranslate"><span class="pre">feature/ctypes_annotation</span></code> and rebasing it often while things are
still flowing.</p>
<p>The few hot fixes didn’t require a new release, but the many
organisational improvements and the new features did warrant the new
release, because of e.g. the much better test handling in this release
and the improved recursion control.</p>
<p>The work on Python3 support has slowed down a bit. I mostly only added
some bits for compatibility, but generally it has slowed down. I wanted
to make sure it doesn’t regress by accident, so running with CPython3.2
is now part of the normal release tests.</p>
<p>What’s still missing is more “hg” completeness. Only the <code class="docutils literal notranslate"><span class="pre">co_varnames</span></code>
work for <code class="docutils literal notranslate"><span class="pre">inspect</span></code> was going in that direction, and this has slowed
down. It was more important to make Nuitka’s recursion more accessible
with the new options, so that was done first.</p>
<p>And of course, the real excitement is the “type inference” work. It will
give a huge boost to Nuitka, and I am happy that it seems to go well.
With this in place, new benchmarks may make sense. I am working on
getting it off the ground, so other people can work on it too. My idea
of <code class="docutils literal notranslate"><span class="pre">ctypes</span></code> native calls may become true sooner than expected. To
support that, I would like to add more tools to make sure we discover
changes earlier on, checking the XML representations of tests to
discover improvements and regressions more clearly.</p>
</section>
</section>

<div class="section">
    

<div class="section">
  <span style="float: left">
     上一页:
    
    <a href="nuitka-release-0316.html">
       Nuitka Release 0.3.16
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     下一页: 
    <a href="nuitka-release-0318.html">
      Nuitka Release 0.3.18 
    </a>
    
  </span>
</div>
  
</div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2022, Kay Hayen and Nuitka Contributors.</p>
  </div>

  
<div class='share-button-container'>
    <div class="socialbutton-wrapper">
        <a href="https://twitter.com/share?url=https://nuitka.net/posts/nuitka-release-0317.html&hashtags=nuitka" target="_blank">
            <div class="socialbutton twitter" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-twitter.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="https://www.facebook.com/sharer.php?u=https://nuitka.net/posts/nuitka-release-0317.html&hashtag=%23nuitka"  target="_blank">
            <div class="socialbutton facebook" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-facebook.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="http://www.reddit.com/submit?url=https://nuitka.net/posts/nuitka-release-0317.html" target="_blank">
            <div class="socialbutton reddit">
                <p class="icon">
                    <img src="/_static/icon-reddit.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
      $('a[href^="http://"], a[href^="https://"]').not('a[class*=internal]').attr('target', '_blank');
    });
  </script>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-V73VK1T804"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-V73VK1T804', {
          'anonymize_ip': true,
      });
    </script> 

</body>
</html>